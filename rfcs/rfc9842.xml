<?xml version='1.0' encoding='utf-8'?>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" version="3" ipr="trust200902" docName="draft-ietf-httpbis-compression-dictionary-19" number="9842" category="std" updates="" obsoletes="" consensus="true" submissionType="IETF" tocInclude="true" sortRefs="true" symRefs="true" xml:lang="en" prepTime="2025-09-30T14:56:07" indexInclude="true" scripts="Common,Latin" tocDepth="3">
  <link href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-compression-dictionary-19" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9842" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <front>
    <title abbrev="Compression Dictionary Transport">Compression Dictionary Transport</title>
    <seriesInfo name="RFC" value="9842" stream="IETF"/>
    <author initials="P." surname="Meenan" fullname="Patrick Meenan" role="editor">
      <organization showOnFrontPage="true">Google LLC</organization>
      <address>
        <email>pmeenan@google.com</email>
      </address>
    </author>
    <author initials="Y." surname="Weiss" fullname="Yoav Weiss" role="editor">
      <organization showOnFrontPage="true">Shopify Inc.</organization>
      <address>
        <email>yoav.weiss@shopify.com</email>
      </address>
    </author>
    <date month="09" year="2025"/>
    <area>ART</area>
    <workgroup>HTTP</workgroup>
    <keyword>compression dictionary</keyword>
    <keyword>shared brotli</keyword>
    <keyword>zstandard dictionary</keyword>
    <keyword>delta compression</keyword>
    <abstract pn="section-abstract">
      <t indent="0" pn="section-abstract-1">This document specifies a mechanism for dictionary-based compression in the
Hypertext Transfer Protocol (HTTP). By utilizing this technique, clients and
servers can reduce the size of transmitted data, leading to improved performance
and reduced bandwidth consumption. This document extends existing HTTP compression
methods and provides guidelines for the delivery and use of compression
dictionaries within the HTTP protocol.</t>
    </abstract>
    <boilerplate>
      <section anchor="status-of-memo" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.1">
        <name slugifiedName="name-status-of-this-memo">Status of This Memo</name>
        <t indent="0" pn="section-boilerplate.1-1">
            This is an Internet Standards Track document.
        </t>
        <t indent="0" pn="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
        </t>
        <t indent="0" pn="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <eref target="https://www.rfc-editor.org/info/rfc9842" brackets="none"/>.
        </t>
      </section>
      <section anchor="copyright" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.2">
        <name slugifiedName="name-copyright-notice">Copyright Notice</name>
        <t indent="0" pn="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.
        </t>
        <t indent="0" pn="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<eref target="https://trustee.ietf.org/license-info" brackets="none"/>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.
        </t>
      </section>
    </boilerplate>
    <toc>
      <section anchor="toc" numbered="false" removeInRFC="false" toc="exclude" pn="section-toc.1">
        <name slugifiedName="name-table-of-contents">Table of Contents</name>
        <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1">
          <li pn="section-toc.1-1.1">
            <t indent="0" pn="section-toc.1-1.1.1"><xref derivedContent="1" format="counter" sectionFormat="of" target="section-1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-introduction">Introduction</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.1.2">
              <li pn="section-toc.1-1.1.2.1">
                <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.1.1"><xref derivedContent="1.1" format="counter" sectionFormat="of" target="section-1.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-use-cases">Use Cases</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.1.2.1.2">
                  <li pn="section-toc.1-1.1.2.1.2.1">
                    <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.1.2.1.1"><xref derivedContent="1.1.1" format="counter" sectionFormat="of" target="section-1.1.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-version-upgrade">Version Upgrade</xref></t>
                  </li>
                  <li pn="section-toc.1-1.1.2.1.2.2">
                    <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.1.2.2.1"><xref derivedContent="1.1.2" format="counter" sectionFormat="of" target="section-1.1.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-common-content">Common Content</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.1.2.2">
                <t indent="0" pn="section-toc.1-1.1.2.2.1"><xref derivedContent="1.2" format="counter" sectionFormat="of" target="section-1.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-notational-conventions">Notational Conventions</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.2">
            <t indent="0" pn="section-toc.1-1.2.1"><xref derivedContent="2" format="counter" sectionFormat="of" target="section-2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-dictionary-negotiation">Dictionary Negotiation</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.2.2">
              <li pn="section-toc.1-1.2.2.1">
                <t indent="0" pn="section-toc.1-1.2.2.1.1"><xref derivedContent="2.1" format="counter" sectionFormat="of" target="section-2.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-use-as-dictionary">Use-As-Dictionary</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.2.2.1.2">
                  <li pn="section-toc.1-1.2.2.1.2.1">
                    <t indent="0" pn="section-toc.1-1.2.2.1.2.1.1"><xref derivedContent="2.1.1" format="counter" sectionFormat="of" target="section-2.1.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-match">"match"</xref></t>
                  </li>
                  <li pn="section-toc.1-1.2.2.1.2.2">
                    <t indent="0" pn="section-toc.1-1.2.2.1.2.2.1"><xref derivedContent="2.1.2" format="counter" sectionFormat="of" target="section-2.1.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-match-dest">"match-dest"</xref></t>
                  </li>
                  <li pn="section-toc.1-1.2.2.1.2.3">
                    <t indent="0" pn="section-toc.1-1.2.2.1.2.3.1"><xref derivedContent="2.1.3" format="counter" sectionFormat="of" target="section-2.1.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-id">"id"</xref></t>
                  </li>
                  <li pn="section-toc.1-1.2.2.1.2.4">
                    <t indent="0" pn="section-toc.1-1.2.2.1.2.4.1"><xref derivedContent="2.1.4" format="counter" sectionFormat="of" target="section-2.1.4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-type">"type"</xref></t>
                  </li>
                  <li pn="section-toc.1-1.2.2.1.2.5">
                    <t indent="0" pn="section-toc.1-1.2.2.1.2.5.1"><xref derivedContent="2.1.5" format="counter" sectionFormat="of" target="section-2.1.5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-examples">Examples</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.2.2.2">
                <t indent="0" pn="section-toc.1-1.2.2.2.1"><xref derivedContent="2.2" format="counter" sectionFormat="of" target="section-2.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-available-dictionary">Available-Dictionary</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.2.2.2.2">
                  <li pn="section-toc.1-1.2.2.2.2.1">
                    <t indent="0" pn="section-toc.1-1.2.2.2.2.1.1"><xref derivedContent="2.2.1" format="counter" sectionFormat="of" target="section-2.2.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-dictionary-freshness-requir">Dictionary Freshness Requirement</xref></t>
                  </li>
                  <li pn="section-toc.1-1.2.2.2.2.2">
                    <t indent="0" pn="section-toc.1-1.2.2.2.2.2.1"><xref derivedContent="2.2.2" format="counter" sectionFormat="of" target="section-2.2.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-dictionary-url-matching">Dictionary URL Matching</xref></t>
                  </li>
                  <li pn="section-toc.1-1.2.2.2.2.3">
                    <t indent="0" pn="section-toc.1-1.2.2.2.2.3.1"><xref derivedContent="2.2.3" format="counter" sectionFormat="of" target="section-2.2.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-multiple-matching-dictionar">Multiple Matching Dictionaries</xref></t>
                  </li>
                </ul>
              </li>
              <li pn="section-toc.1-1.2.2.3">
                <t indent="0" pn="section-toc.1-1.2.2.3.1"><xref derivedContent="2.3" format="counter" sectionFormat="of" target="section-2.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-dictionary-id">Dictionary-ID</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.3">
            <t indent="0" pn="section-toc.1-1.3.1"><xref derivedContent="3" format="counter" sectionFormat="of" target="section-3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-the-compression-dictionary-">The "compression-dictionary" Link Relation Type</xref></t>
          </li>
          <li pn="section-toc.1-1.4">
            <t indent="0" pn="section-toc.1-1.4.1"><xref derivedContent="4" format="counter" sectionFormat="of" target="section-4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-dictionary-compressed-brotl">Dictionary-Compressed Brotli</xref></t>
          </li>
          <li pn="section-toc.1-1.5">
            <t indent="0" pn="section-toc.1-1.5.1"><xref derivedContent="5" format="counter" sectionFormat="of" target="section-5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-dictionary-compressed-zstan">Dictionary-Compressed Zstandard</xref></t>
          </li>
          <li pn="section-toc.1-1.6">
            <t indent="0" pn="section-toc.1-1.6.1"><xref derivedContent="6" format="counter" sectionFormat="of" target="section-6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-negotiating-the-content-enc">Negotiating the Content Encoding</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.6.2">
              <li pn="section-toc.1-1.6.2.1">
                <t indent="0" pn="section-toc.1-1.6.2.1.1"><xref derivedContent="6.1" format="counter" sectionFormat="of" target="section-6.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-accept-encoding">Accept-Encoding</xref></t>
              </li>
              <li pn="section-toc.1-1.6.2.2">
                <t indent="0" pn="section-toc.1-1.6.2.2.1"><xref derivedContent="6.2" format="counter" sectionFormat="of" target="section-6.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-content-encoding">Content-Encoding</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.7">
            <t indent="0" pn="section-toc.1-1.7.1"><xref derivedContent="7" format="counter" sectionFormat="of" target="section-7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-iana-considerations">IANA Considerations</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.7.2">
              <li pn="section-toc.1-1.7.2.1">
                <t indent="0" pn="section-toc.1-1.7.2.1.1"><xref derivedContent="7.1" format="counter" sectionFormat="of" target="section-7.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-content-encoding-registrati">Content Encoding Registration</xref></t>
              </li>
              <li pn="section-toc.1-1.7.2.2">
                <t indent="0" pn="section-toc.1-1.7.2.2.1"><xref derivedContent="7.2" format="counter" sectionFormat="of" target="section-7.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-header-field-registration">Header Field Registration</xref></t>
              </li>
              <li pn="section-toc.1-1.7.2.3">
                <t indent="0" pn="section-toc.1-1.7.2.3.1"><xref derivedContent="7.3" format="counter" sectionFormat="of" target="section-7.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-link-relation-registration">Link Relation Registration</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.8">
            <t indent="0" pn="section-toc.1-1.8.1"><xref derivedContent="8" format="counter" sectionFormat="of" target="section-8"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-compatibility-consideration">Compatibility Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.9">
            <t indent="0" pn="section-toc.1-1.9.1"><xref derivedContent="9" format="counter" sectionFormat="of" target="section-9"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-security-considerations">Security Considerations</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.9.2">
              <li pn="section-toc.1-1.9.2.1">
                <t indent="0" pn="section-toc.1-1.9.2.1.1"><xref derivedContent="9.1" format="counter" sectionFormat="of" target="section-9.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-changing-content">Changing Content</xref></t>
              </li>
              <li pn="section-toc.1-1.9.2.2">
                <t indent="0" pn="section-toc.1-1.9.2.2.1"><xref derivedContent="9.2" format="counter" sectionFormat="of" target="section-9.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-reading-content">Reading Content</xref></t>
              </li>
              <li pn="section-toc.1-1.9.2.3">
                <t indent="0" pn="section-toc.1-1.9.2.3.1"><xref derivedContent="9.3" format="counter" sectionFormat="of" target="section-9.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-security-mitigations">Security Mitigations</xref></t>
                <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.9.2.3.2">
                  <li pn="section-toc.1-1.9.2.3.2.1">
                    <t indent="0" pn="section-toc.1-1.9.2.3.2.1.1"><xref derivedContent="9.3.1" format="counter" sectionFormat="of" target="section-9.3.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-cross-origin-protection">Cross-Origin Protection</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.3.2.2">
                    <t indent="0" pn="section-toc.1-1.9.2.3.2.2.1"><xref derivedContent="9.3.2" format="counter" sectionFormat="of" target="section-9.3.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-response-readability">Response Readability</xref></t>
                  </li>
                  <li pn="section-toc.1-1.9.2.3.2.3">
                    <t indent="0" pn="section-toc.1-1.9.2.3.2.3.1"><xref derivedContent="9.3.3" format="counter" sectionFormat="of" target="section-9.3.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-server-responsibility">Server Responsibility</xref></t>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.10">
            <t indent="0" pn="section-toc.1-1.10.1"><xref derivedContent="10" format="counter" sectionFormat="of" target="section-10"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-privacy-considerations">Privacy Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.11">
            <t indent="0" pn="section-toc.1-1.11.1"><xref derivedContent="11" format="counter" sectionFormat="of" target="section-11"/>. <xref derivedContent="" format="title" sectionFormat="of" target="name-references">References</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.11.2">
              <li pn="section-toc.1-1.11.2.1">
                <t indent="0" pn="section-toc.1-1.11.2.1.1"><xref derivedContent="11.1" format="counter" sectionFormat="of" target="section-11.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-normative-references">Normative References</xref></t>
              </li>
              <li pn="section-toc.1-1.11.2.2">
                <t indent="0" pn="section-toc.1-1.11.2.2.1"><xref derivedContent="11.2" format="counter" sectionFormat="of" target="section-11.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-informative-references">Informative References</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.12">
            <t indent="0" pn="section-toc.1-1.12.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.a"/><xref derivedContent="" format="title" sectionFormat="of" target="name-authors-addresses">Authors' Addresses</xref></t>
          </li>
        </ul>
      </section>
    </toc>
  </front>
  <middle>
    <section anchor="introduction" numbered="true" removeInRFC="false" toc="include" pn="section-1">
      <name slugifiedName="name-introduction">Introduction</name>
      <t indent="0" pn="section-1-1">This specification defines a mechanism for using designated HTTP <xref target="RFC9110" format="default" sectionFormat="of" derivedContent="HTTP"/> responses
as an external dictionary for future HTTP responses for compression schemes
that support using external dictionaries (e.g., Brotli <xref target="RFC7932" format="default" sectionFormat="of" derivedContent="RFC7932"/> and
Zstandard <xref target="RFC8878" format="default" sectionFormat="of" derivedContent="ZSTD"/>).</t>
      <t indent="0" pn="section-1-2">This document describes the HTTP headers used for negotiating dictionary usage
and registers content-encoding values for compressing with Brotli and Zstandard
using a negotiated dictionary.</t>
      <t indent="0" pn="section-1-3">The negotiation of dictionary usage leverages HTTP's content negotiation
(see <xref section="12" sectionFormat="of" target="RFC9110" format="default" derivedLink="https://rfc-editor.org/rfc/rfc9110#section-12" derivedContent="HTTP"/>) and is usable with all versions of HTTP.</t>
      <section anchor="use-cases" numbered="true" removeInRFC="false" toc="include" pn="section-1.1">
        <name slugifiedName="name-use-cases">Use Cases</name>
        <t indent="0" pn="section-1.1-1">Any HTTP response can be specified for use as a compression dictionary for
future HTTP requests, which provides a lot of flexibility. Two common
use cases that are seen frequently are described below.</t>
        <section anchor="version-upgrade" numbered="true" removeInRFC="false" toc="include" pn="section-1.1.1">
          <name slugifiedName="name-version-upgrade">Version Upgrade</name>
          <t indent="0" pn="section-1.1.1-1">Using a previous version of a resource as a dictionary for a newer version
enables delivery of a delta-compressed version of the changes, usually
resulting in significantly smaller responses than what can be achieved by
compression alone.</t>
          <t indent="0" pn="section-1.1.1-2">For example:</t>
          <figure align="left" suppress-title="false" pn="figure-1">
            <name slugifiedName="name-version-upgrade-example">Version Upgrade Example</name>
            <artset pn="section-1.1.1-3.1">
              <artwork type="svg" align="left" pn="section-1.1.1-3.1.1"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="432" width="424" viewBox="0 0 424 432" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                  <path d="M 8,48 L 8,176" fill="none" stroke="black"/>
                  <path d="M 8,256 L 8,416" fill="none" stroke="black"/>
                  <path d="M 416,48 L 416,176" fill="none" stroke="black"/>
                  <path d="M 416,256 L 416,416" fill="none" stroke="black"/>
                  <path d="M 16,80 L 408,80" fill="none" stroke="black"/>
                  <path d="M 16,160 L 408,160" fill="none" stroke="black"/>
                  <path d="M 16,320 L 408,320" fill="none" stroke="black"/>
                  <path d="M 16,400 L 408,400" fill="none" stroke="black"/>
                  <polygon class="arrowhead" points="416,320 404,314.4 404,325.6" fill="black" transform="rotate(0,408,320)"/>
                  <polygon class="arrowhead" points="416,80 404,74.4 404,85.6" fill="black" transform="rotate(0,408,80)"/>
                  <polygon class="arrowhead" points="24,400 12,394.4 12,405.6" fill="black" transform="rotate(180,16,400)"/>
                  <polygon class="arrowhead" points="24,160 12,154.4 12,165.6" fill="black" transform="rotate(180,16,160)"/>
                  <g class="text">
                    <text x="28" y="36">Client</text>
                    <text x="396" y="36">Server</text>
                    <text x="32" y="68">GET</text>
                    <text x="92" y="68">/app.v1.js</text>
                    <text x="64" y="116">200</text>
                    <text x="92" y="116">OK</text>
                    <text x="124" y="132">Use-As-Dictionary:</text>
                    <text x="264" y="132">match="/app*js"</text>
                    <text x="72" y="148">&lt;full</text>
                    <text x="136" y="148">app.v1.js</text>
                    <text x="212" y="148">resource</text>
                    <text x="256" y="148">-</text>
                    <text x="288" y="148">100KB</text>
                    <text x="360" y="148">compressed&gt;</text>
                    <text x="20" y="212">Some</text>
                    <text x="60" y="212">time</text>
                    <text x="104" y="212">later</text>
                    <text x="144" y="212">...</text>
                    <text x="28" y="244">Client</text>
                    <text x="396" y="244">Server</text>
                    <text x="32" y="276">GET</text>
                    <text x="92" y="276">/app.v2.js</text>
                    <text x="104" y="292">Available-Dictionary:</text>
                    <text x="272" y="292">:pZGm1A...2a2fFG4=:</text>
                    <text x="84" y="308">Accept-Encoding:</text>
                    <text x="176" y="308">gzip,</text>
                    <text x="216" y="308">br,</text>
                    <text x="256" y="308">zstd,</text>
                    <text x="300" y="308">dcb,</text>
                    <text x="336" y="308">dcz</text>
                    <text x="72" y="356">200</text>
                    <text x="100" y="356">OK</text>
                    <text x="128" y="372">Content-Encoding:</text>
                    <text x="216" y="372">dcb</text>
                    <text x="128" y="388">&lt;delta-compressed</text>
                    <text x="240" y="388">app.v2.js</text>
                    <text x="316" y="388">resource</text>
                    <text x="360" y="388">-</text>
                    <text x="388" y="388">1KB&gt;</text>
                  </g>
                </svg>
              </artwork>
              <artwork type="ascii-art" align="left" pn="section-1.1.1-3.1.2">
Client                                        Server
|                                                  |
| GET /app.v1.js                                   |
|-------------------------------------------------&gt;|
|                                                  |
|     200 OK                                       |
|     Use-As-Dictionary: match="/app*js"           |
|     &lt;full app.v1.js resource - 100KB compressed&gt; |
|&lt;-------------------------------------------------|
|                                                  |

Some time later ...

Client                                        Server
|                                                  |
| GET /app.v2.js                                   |
| Available-Dictionary: :pZGm1A...2a2fFG4=:        |
| Accept-Encoding: gzip, br, zstd, dcb, dcz        |
|-------------------------------------------------&gt;|
|                                                  |
|      200 OK                                      |
|      Content-Encoding: dcb                       |
|      &lt;delta-compressed app.v2.js resource - 1KB&gt; |
|&lt;-------------------------------------------------|
|                                                  |
</artwork>
            </artset>
          </figure>
        </section>
        <section anchor="common-content" numbered="true" removeInRFC="false" toc="include" pn="section-1.1.2">
          <name slugifiedName="name-common-content">Common Content</name>
          <t indent="0" pn="section-1.1.2-1">If several resources share common patterns in their responses, then it can be
useful to reference an external dictionary that contains those common patterns,
effectively compressing them out of the responses. Some examples of this are
common template HTML for similar pages across a site and common keys and values
in API calls.</t>
          <t indent="0" pn="section-1.1.2-2">For example:</t>
          <figure align="left" suppress-title="false" pn="figure-2">
            <name slugifiedName="name-common-content-example">Common Content Example</name>
            <artset pn="section-1.1.2-3.1">
              <artwork type="svg" align="left" pn="section-1.1.2-3.1.1"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="544" width="440" viewBox="0 0 440 544" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                  <path d="M 8,48 L 8,288" fill="none" stroke="black"/>
                  <path d="M 8,368 L 8,528" fill="none" stroke="black"/>
                  <path d="M 432,48 L 432,288" fill="none" stroke="black"/>
                  <path d="M 432,368 L 432,528" fill="none" stroke="black"/>
                  <path d="M 16,80 L 424,80" fill="none" stroke="black"/>
                  <path d="M 16,160 L 424,160" fill="none" stroke="black"/>
                  <path d="M 16,208 L 424,208" fill="none" stroke="black"/>
                  <path d="M 16,272 L 424,272" fill="none" stroke="black"/>
                  <path d="M 16,432 L 424,432" fill="none" stroke="black"/>
                  <path d="M 16,512 L 424,512" fill="none" stroke="black"/>
                  <polygon class="arrowhead" points="432,432 420,426.4 420,437.6" fill="black" transform="rotate(0,424,432)"/>
                  <polygon class="arrowhead" points="432,208 420,202.4 420,213.6" fill="black" transform="rotate(0,424,208)"/>
                  <polygon class="arrowhead" points="432,80 420,74.4 420,85.6" fill="black" transform="rotate(0,424,80)"/>
                  <polygon class="arrowhead" points="24,512 12,506.4 12,517.6" fill="black" transform="rotate(180,16,512)"/>
                  <polygon class="arrowhead" points="24,272 12,266.4 12,277.6" fill="black" transform="rotate(180,16,272)"/>
                  <polygon class="arrowhead" points="24,160 12,154.4 12,165.6" fill="black" transform="rotate(180,16,160)"/>
                  <g class="text">
                    <text x="28" y="36">Client</text>
                    <text x="412" y="36">Server</text>
                    <text x="32" y="68">GET</text>
                    <text x="96" y="68">/index.html</text>
                    <text x="64" y="116">200</text>
                    <text x="92" y="116">OK</text>
                    <text x="72" y="132">Link:</text>
                    <text x="144" y="132">&lt;.../dict&gt;;</text>
                    <text x="308" y="132">rel="compression-dictionary"</text>
                    <text x="72" y="148">&lt;full</text>
                    <text x="140" y="148">index.html</text>
                    <text x="220" y="148">resource</text>
                    <text x="264" y="148">-</text>
                    <text x="296" y="148">100KB</text>
                    <text x="368" y="148">compressed&gt;</text>
                    <text x="32" y="196">GET</text>
                    <text x="72" y="196">/dict</text>
                    <text x="168" y="244">200</text>
                    <text x="196" y="244">OK</text>
                    <text x="228" y="260">Use-As-Dictionary:</text>
                    <text x="364" y="260">match="/*html"</text>
                    <text x="20" y="324">Some</text>
                    <text x="60" y="324">time</text>
                    <text x="104" y="324">later</text>
                    <text x="144" y="324">...</text>
                    <text x="28" y="356">Client</text>
                    <text x="412" y="356">Server</text>
                    <text x="32" y="388">GET</text>
                    <text x="96" y="388">/page2.html</text>
                    <text x="104" y="404">Available-Dictionary:</text>
                    <text x="272" y="404">:pZGm1A...2a2fFG4=:</text>
                    <text x="84" y="420">Accept-Encoding:</text>
                    <text x="176" y="420">gzip,</text>
                    <text x="216" y="420">br,</text>
                    <text x="256" y="420">zstd,</text>
                    <text x="300" y="420">dcb,</text>
                    <text x="336" y="420">dcz</text>
                    <text x="72" y="468">200</text>
                    <text x="100" y="468">OK</text>
                    <text x="128" y="484">Content-Encoding:</text>
                    <text x="216" y="484">dcb</text>
                    <text x="128" y="500">&lt;delta-compressed</text>
                    <text x="244" y="500">page2.html</text>
                    <text x="324" y="500">resource</text>
                    <text x="368" y="500">-</text>
                    <text x="400" y="500">10KB&gt;</text>
                  </g>
                </svg>
              </artwork>
              <artwork type="ascii-art" align="left" pn="section-1.1.2-3.1.2">
Client                                          Server
|                                                    |
| GET /index.html                                    |
|---------------------------------------------------&gt;|
|                                                    |
|     200 OK                                         |
|     Link: &lt;.../dict&gt;; rel="compression-dictionary" |
|     &lt;full index.html resource - 100KB compressed&gt;  |
|&lt;---------------------------------------------------|
|                                                    |
| GET /dict                                          |
|---------------------------------------------------&gt;|
|                                                    |
|                  200 OK                            |
|                  Use-As-Dictionary: match="/*html" |
|&lt;---------------------------------------------------|
|                                                    |

Some time later ...

Client                                          Server
|                                                    |
| GET /page2.html                                    |
| Available-Dictionary: :pZGm1A...2a2fFG4=:          |
| Accept-Encoding: gzip, br, zstd, dcb, dcz          |
|---------------------------------------------------&gt;|
|                                                    |
|      200 OK                                        |
|      Content-Encoding: dcb                         |
|      &lt;delta-compressed page2.html resource - 10KB&gt; |
|&lt;---------------------------------------------------|
|                                                    |
</artwork>
            </artset>
          </figure>
        </section>
      </section>
      <section anchor="notational-conventions" numbered="true" removeInRFC="false" toc="include" pn="section-1.2">
        <name slugifiedName="name-notational-conventions">Notational Conventions</name>
        <t indent="0" pn="section-1.2-1">
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
    described in BCP 14 <xref target="RFC2119" format="default" sectionFormat="of" derivedContent="RFC2119"/> <xref target="RFC8174" format="default" sectionFormat="of" derivedContent="RFC8174"/> 
    when, and only when, they appear in all capitals, as shown here.
        </t>
        <t indent="0" pn="section-1.2-2">This document uses the following terminology from <xref target="RFC9651" sectionFormat="of" section="3" format="default" derivedLink="https://rfc-editor.org/rfc/rfc9651#section-3" derivedContent="STRUCTURED-FIELDS"/> to specify
syntax and parsing: Dictionary, String, Inner List, Token, and Byte
Sequence.</t>
        <t indent="0" pn="section-1.2-3">This document uses the line folding strategies described in <xref target="RFC8792" format="default" sectionFormat="of" derivedContent="FOLDING"/>.</t>
        <t indent="0" pn="section-1.2-4">This document also uses terminology from <xref target="RFC9110" format="default" sectionFormat="of" derivedContent="HTTP"/> and <xref target="RFC9111" format="default" sectionFormat="of" derivedContent="HTTP-CACHING"/>.</t>
      </section>
    </section>
    <section anchor="dictionary-negotiation" numbered="true" removeInRFC="false" toc="include" pn="section-2">
      <name slugifiedName="name-dictionary-negotiation">Dictionary Negotiation</name>
      <section anchor="use-as-dictionary" numbered="true" removeInRFC="false" toc="include" pn="section-2.1">
        <name slugifiedName="name-use-as-dictionary">Use-As-Dictionary</name>
        <t indent="0" pn="section-2.1-1">When responding to an HTTP Request, a server can advertise that the response can
be used as a dictionary for future requests for URLs that match the rules
specified in the "Use-As-Dictionary" response header.</t>
        <t indent="0" pn="section-2.1-2">The "Use-As-Dictionary" response header is a Structured Field
<xref target="RFC9651" format="default" sectionFormat="of" derivedContent="STRUCTURED-FIELDS"/> Dictionary with values for "match", "match-dest", "id",
and "type".</t>
        <section anchor="match" numbered="true" removeInRFC="false" toc="include" pn="section-2.1.1">
          <name slugifiedName="name-match">"match"</name>
          <t indent="0" pn="section-2.1.1-1">The "match" value of the "Use-As-Dictionary" response header is a String value that
provides the URL Pattern to use for request matching (see <xref target="URLPATTERN" format="default" sectionFormat="of" derivedContent="URLPATTERN"/>).</t>
          <t indent="0" pn="section-2.1.1-2">The URL Pattern used for matching does not support using regular expressions.</t>
          <t indent="0" pn="section-2.1.1-3">The following algorithm is used to validate that a given String value is a
valid URL Pattern that does not use regular expressions and is for the same
Origin (<xref section="4.3.1" sectionFormat="of" target="RFC9110" format="default" derivedLink="https://rfc-editor.org/rfc/rfc9110#section-4.3.1" derivedContent="HTTP"/>) as the dictionary. It will return TRUE
for a valid match pattern and FALSE for an invalid pattern that <bcp14>MUST NOT</bcp14> be
used.</t>
          <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-2.1.1-4">
	    <li pn="section-2.1.1-4.1" derivedCounter="1.">
              <t indent="0" pn="section-2.1.1-4.1.1">Let MATCH be the value of "match" for the given dictionary.</t>
            </li>
            <li pn="section-2.1.1-4.2" derivedCounter="2.">
              <t indent="0" pn="section-2.1.1-4.2.1">Let URL be the URL of the dictionary request.</t>
            </li>
            <li pn="section-2.1.1-4.3" derivedCounter="3.">
              <t indent="0" pn="section-2.1.1-4.3.1">Let PATTERN be a "URL pattern struct" created by running the steps to "create a
URL pattern" by setting input=MATCH and baseURL=URL (see <xref target="URLPATTERN" section="1.4" relative="#high-level-operations" format="default" sectionFormat="of" derivedLink="https://urlpattern.spec.whatwg.org/#high-level-operations" derivedContent="URLPATTERN"/>).</t>
            </li>
            <li pn="section-2.1.1-4.4" derivedCounter="4.">
              <t indent="0" pn="section-2.1.1-4.4.1">If the result of running the "has regexp groups" steps for PATTERN returns
TRUE, then return FALSE (see the last list in <xref target="URLPATTERN" section="1.4" relative="#high-level-operations" format="default" sectionFormat="of" derivedLink="https://urlpattern.spec.whatwg.org/#high-level-operations" derivedContent="URLPATTERN"/>).</t>
            </li>
            <li pn="section-2.1.1-4.5" derivedCounter="5.">
              <t indent="0" pn="section-2.1.1-4.5.1">Return TRUE.</t>
            </li>
          </ol>
          <t indent="0" pn="section-2.1.1-5">The "match" value is required and <bcp14>MUST</bcp14> be included in the
"Use-As-Dictionary" response header for the dictionary to be considered valid.</t>
          <t indent="0" pn="section-2.1.1-6">Operating at the HTTP level, the specified match patterns will operate on the
percent-encoded version of the URL path (see <xref section="2" sectionFormat="of" target="RFC3986" format="default" derivedLink="https://rfc-editor.org/rfc/rfc3986#section-2" derivedContent="URL"/>).</t>
          <t indent="0" pn="section-2.1.1-7">For example, the URL "http://www.example.com/düsseldorf" would be encoded as
"http://www.example.com/d%C3%BCsseldorf" and a relevant match pattern would be:</t>
          <sourcecode type="http-message" markers="false" pn="section-2.1.1-8">
Use-As-Dictionary: match="/d%C3%BCsseldorf"
</sourcecode>
        </section>
        <section anchor="match-dest" numbered="true" removeInRFC="false" toc="include" pn="section-2.1.2">
          <name slugifiedName="name-match-dest">"match-dest"</name>
          <t indent="0" pn="section-2.1.2-1">The "match-dest" value of the "Use-As-Dictionary" response header is an Inner List of
String values that provides a list of Fetch request destinations for the
dictionary to match (see "RequestDestination" in <xref target="FETCH" section="5.4" relative="#request-class" format="default" sectionFormat="of" derivedLink="https://fetch.spec.whatwg.org/#request-class" derivedContent="FETCH"/>).</t>
          <t indent="0" pn="section-2.1.2-2">An empty list for "match-dest" <bcp14>MUST</bcp14> match all destinations.</t>
          <t indent="0" pn="section-2.1.2-3">For clients that do not support request destinations, the client <bcp14>MUST</bcp14> treat it
as an empty list and match all destinations.</t>
          <t indent="0" pn="section-2.1.2-4">The "match-dest" value is optional and defaults to an empty list.</t>
        </section>
        <section anchor="id" numbered="true" removeInRFC="false" toc="include" pn="section-2.1.3">
          <name slugifiedName="name-id">"id"</name>
          <t indent="0" pn="section-2.1.3-1">The "id" value of the "Use-As-Dictionary" response header is a String value that specifies
a server identifier for the dictionary. If an "id" value is present and has a
string length longer than zero, then it <bcp14>MUST</bcp14> be sent to the server in a
"Dictionary-ID" request header when the client sends an "Available-Dictionary"
request header for the same dictionary (see <xref target="available-dictionary" format="default" sectionFormat="of" derivedContent="Section 2.2"/>).</t>
          <t indent="0" pn="section-2.1.3-2">The server identifier <bcp14>MUST</bcp14> be treated as an opaque string by the client.</t>
          <t indent="0" pn="section-2.1.3-3">The server identifier <bcp14>MUST NOT</bcp14> be relied upon by the server to guarantee the
contents of the dictionary. The dictionary hash <bcp14>MUST</bcp14> be validated before use.</t>
          <t indent="0" pn="section-2.1.3-4">The "id" value string length (after any decoding) supports up to 1024
characters.</t>
          <t indent="0" pn="section-2.1.3-5">The "id" value is optional and defaults to the empty string.</t>
        </section>
        <section anchor="type" numbered="true" removeInRFC="false" toc="include" pn="section-2.1.4">
          <name slugifiedName="name-type">"type"</name>
          <t indent="0" pn="section-2.1.4-1">The "type" value of the "Use-As-Dictionary" response header is a Token value that
describes the file format of the supplied dictionary.</t>
          <t indent="0" pn="section-2.1.4-2">"raw" is defined as a dictionary format that represents an unformatted blob of
bytes suitable for any compression scheme to use.</t>
          <t indent="0" pn="section-2.1.4-3">If a client receives a dictionary with a type that it does not understand, it
<bcp14>MUST NOT</bcp14> use the dictionary.</t>
          <t indent="0" pn="section-2.1.4-4">The "type" value is optional and defaults to "raw".</t>
        </section>
        <section anchor="examples" numbered="true" removeInRFC="false" toc="include" pn="section-2.1.5">
          <name slugifiedName="name-examples">Examples</name>
          <section anchor="path-prefix" numbered="true" removeInRFC="false" toc="exclude" pn="section-2.1.5.1">
            <name slugifiedName="name-path-prefix">Path Prefix</name>
            <t indent="0" pn="section-2.1.5.1-1">A response that contained a response header (as shown below) would specify matching any document request for a URL with a path prefix of                
/product/ on the same Origin (<xref section="4.3.1" sectionFormat="of" target="RFC9110" format="default" derivedLink="https://rfc-editor.org/rfc/rfc9110#section-4.3.1" derivedContent="HTTP"/>) as the original request:</t>
            <sourcecode type="http-message" markers="false" pn="section-2.1.5.1-2">
NOTE: '\' line wrapping per RFC 8792

Use-As-Dictionary: \
  match="/product/*", match-dest=("document")
</sourcecode>
          </section>
          <section anchor="versioned-directories" numbered="true" removeInRFC="false" toc="exclude" pn="section-2.1.5.2">
            <name slugifiedName="name-versioned-directories">Versioned Directories</name>
            <t indent="0" pn="section-2.1.5.2-1">A response that contained a response header (as shown below) would match any path that starts with "/app/" and ends with "/main.js":</t>
            <sourcecode type="http-message" markers="false" pn="section-2.1.5.2-2">
Use-As-Dictionary: match="/app/*/main.js"
</sourcecode>
          </section>
        </section>
      </section>
      <section anchor="available-dictionary" numbered="true" removeInRFC="false" toc="include" pn="section-2.2">
        <name slugifiedName="name-available-dictionary">Available-Dictionary</name>
        <t indent="0" pn="section-2.2-1">When an HTTP client makes a request for a resource for which it has an
appropriate dictionary, it can add an "Available-Dictionary" request header
to the request to indicate to the server that it has a dictionary available to
use for compression.</t>
        <t indent="0" pn="section-2.2-2">The "Available-Dictionary" request header is a Structured Field
<xref target="RFC9651" format="default" sectionFormat="of" derivedContent="STRUCTURED-FIELDS"/> Byte Sequence containing the SHA-256 <xref target="RFC6234" format="default" sectionFormat="of" derivedContent="SHA-256"/> hash of the
contents of a single available dictionary.</t>
        <t indent="0" pn="section-2.2-3">The client <bcp14>MUST</bcp14> only send a single "Available-Dictionary" request header
with a single hash value for the best available match that it has available.</t>
        <t indent="0" pn="section-2.2-4">For example:</t>
        <sourcecode type="http-message" markers="false" pn="section-2.2-5">
Available-Dictionary: :pZGm1Av0IEBKARczz7exkNYsZb8LzaMrV7J32a2fFG4=:
</sourcecode>
        <section anchor="dictionary-freshness-requirement" numbered="true" removeInRFC="false" toc="include" pn="section-2.2.1">
          <name slugifiedName="name-dictionary-freshness-requir">Dictionary Freshness Requirement</name>
          <t indent="0" pn="section-2.2.1-1">To be considered as a match, the dictionary resource <bcp14>MUST</bcp14> be either fresh
<xref target="RFC9111" format="default" sectionFormat="of" derivedContent="HTTP-CACHING"/> or allowed to be served stale (see <xref target="RFC5861" format="default" sectionFormat="of" derivedContent="RFC5861"/>).</t>
        </section>
        <section anchor="dictionary-url-matching" numbered="true" removeInRFC="false" toc="include" pn="section-2.2.2">
          <name slugifiedName="name-dictionary-url-matching">Dictionary URL Matching</name>
          <t indent="0" pn="section-2.2.2-1">When a dictionary is stored as a result of a "Use-As-Dictionary" directive, it
includes a "match" string and an optional "match-dest" string that are used to
match an outgoing request from a client to the available dictionaries.</t>
          <t indent="0" pn="section-2.2.2-2">To see if an outbound request matches a given dictionary, the following
algorithm will return TRUE for a successful match and FALSE for no-match:</t>
          <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-2.2.2-3"><li pn="section-2.2.2-3.1" derivedCounter="1.">
              <t indent="0" pn="section-2.2.2-3.1.1">If the current client supports request destinations and a "match-dest"
string was provided with the dictionary:
              </t>
              <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-2.2.2-3.1.2">
                <li pn="section-2.2.2-3.1.2.1">
                  <t indent="0" pn="section-2.2.2-3.1.2.1.1">Let DEST be the value of "match-dest" for the given dictionary.</t>
                </li>
                <li pn="section-2.2.2-3.1.2.2">
                  <t indent="0" pn="section-2.2.2-3.1.2.2.1">Let REQUEST_DEST be the value of the destination for the current
 request.</t>
                </li>
                <li pn="section-2.2.2-3.1.2.3">
                  <t indent="0" pn="section-2.2.2-3.1.2.3.1">If DEST is not an empty list and if REQUEST_DEST is not in the DEST list
 of destinations, return FALSE.</t>
                </li>
              </ul>
            </li>
            <li pn="section-2.2.2-3.2" derivedCounter="2.">
              <t indent="0" pn="section-2.2.2-3.2.1">Let BASEURL be the URL of the dictionary request.</t>
            </li>
            <li pn="section-2.2.2-3.3" derivedCounter="3.">
              <t indent="0" pn="section-2.2.2-3.3.1">Let URL represent the URL of the outbound request being checked.</t>
            </li>
            <li pn="section-2.2.2-3.4" derivedCounter="4.">
              <t indent="0" pn="section-2.2.2-3.4.1">If the Origin of BASEURL and the Origin of URL are not the same, return
FALSE (see <xref section="4.3.1" sectionFormat="of" target="RFC9110" format="default" derivedLink="https://rfc-editor.org/rfc/rfc9110#section-4.3.1" derivedContent="HTTP"/>).</t>
            </li>
            <li pn="section-2.2.2-3.5" derivedCounter="5.">
              <t indent="0" pn="section-2.2.2-3.5.1">Let MATCH be the value of "match" for the given dictionary.</t>
            </li>
            <li pn="section-2.2.2-3.6" derivedCounter="6.">
              <t indent="0" pn="section-2.2.2-3.6.1">Let PATTERN be a "URL pattern struct" created by running the steps to "create a URL pattern" by setting input=MATCH and baseURL=URL (see <xref target="URLPATTERN" section="1.4" relative="#high-level-operations" format="default" sectionFormat="of" derivedLink="https://urlpattern.spec.whatwg.org/#high-level-operations" derivedContent="URLPATTERN"/>).</t>
            </li>
            <li pn="section-2.2.2-3.7" derivedCounter="7.">
              <t indent="0" pn="section-2.2.2-3.7.1">Return the result of running the "match" steps on PATTERN with input=URL,
which will check for a match between the request URL and the supplied "match"
string (see "Match" in <xref target="URLPATTERN" section="1.4" relative="#high-level-operations" format="default" sectionFormat="of" derivedLink="https://urlpattern.spec.whatwg.org/#high-level-operations" derivedContent="URLPATTERN"/>).</t>
            </li>
          </ol>
        </section>
        <section anchor="multiple-matching-dictionaries" numbered="true" removeInRFC="false" toc="include" pn="section-2.2.3">
          <name slugifiedName="name-multiple-matching-dictionar">Multiple Matching Dictionaries</name>
          <t indent="0" pn="section-2.2.3-1">When there are multiple dictionaries that match a given request URL, the client
<bcp14>MUST</bcp14> pick a single dictionary using the following rules:</t>
          <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-2.2.3-2"><li pn="section-2.2.3-2.1" derivedCounter="1.">
              <t indent="0" pn="section-2.2.3-2.1.1">For clients that support request destinations, a dictionary that specifies
and matches a "match-dest" takes precedence over a match that does not use a
destination.</t>
            </li>
            <li pn="section-2.2.3-2.2" derivedCounter="2.">
              <t indent="0" pn="section-2.2.3-2.2.1">Given equivalent destination precedence, the dictionary with the longest
"match" takes precedence.</t>
            </li>
            <li pn="section-2.2.3-2.3" derivedCounter="3.">
              <t indent="0" pn="section-2.2.3-2.3.1">Given equivalent destination and match length precedence, the most recently
fetched dictionary takes precedence.</t>
            </li>
          </ol>
        </section>
      </section>
      <section anchor="dictionary-id" numbered="true" removeInRFC="false" toc="include" pn="section-2.3">
        <name slugifiedName="name-dictionary-id">Dictionary-ID</name>
        <t indent="0" pn="section-2.3-1">When an HTTP client makes a request for a resource for which it has an
appropriate dictionary and the dictionary was stored with a server-provided
"id" in the "Use-As-Dictionary" response header, the client <bcp14>MUST</bcp14> echo the stored
"id" in a "Dictionary-ID" request header.</t>
        <t indent="0" pn="section-2.3-2">The "Dictionary-ID" request header is a Structured Field <xref target="RFC9651" format="default" sectionFormat="of" derivedContent="STRUCTURED-FIELDS"/>
String of up to 1024 characters (after any decoding) and <bcp14>MUST</bcp14> be identical to
the server-provided "id".</t>
        <t indent="0" pn="section-2.3-3">For example, given an HTTP response that set a dictionary ID:</t>
        <sourcecode type="http-message" markers="false" pn="section-2.3-4">
Use-As-Dictionary: match="/app/*/main.js", id="dictionary-12345"
</sourcecode>
        <t indent="0" pn="section-2.3-5">A future request that matches the given dictionary will include both the hash
and the ID:</t>
        <sourcecode type="http-message" markers="false" pn="section-2.3-6">
Available-Dictionary: :pZGm1Av0IEBKARczz7exkNYsZb8LzaMrV7J32a2fFG4=:
Dictionary-ID: "dictionary-12345"
</sourcecode>
      </section>
    </section>
    <section anchor="the-compression-dictionary-link-relation-type" numbered="true" removeInRFC="false" toc="include" pn="section-3">
      <name slugifiedName="name-the-compression-dictionary-">The "compression-dictionary" Link Relation Type</name>
      <t indent="0" pn="section-3-1">This specification defines the "compression-dictionary" link relation type
<xref target="RFC8288" format="default" sectionFormat="of" derivedContent="WEB-LINKING"/> that provides a mechanism for an HTTP response to provide a URL
for a compression dictionary that is related to but not directly used by the
current HTTP response.</t>
      <t indent="0" pn="section-3-2">The "compression-dictionary" link relation type indicates that fetching and
caching the specified resource is likely to be beneficial for future requests.
The response to some of those future requests likely have the ability to use
the indicated resource as a compression dictionary.</t>
      <t indent="0" pn="section-3-3">Clients can fetch the provided resource at a time that they determine would
      be appropriate.</t>
      <t indent="0" pn="section-3-4">The response to the fetch for the compression dictionary needs to include a "Use-As-Dictionary" response header and a caching response header for it to be usable as a compression dictionary. The link relation only provides the mechanism for
triggering the fetch of the dictionary.</t>
      <t indent="0" pn="section-3-5">The following example shows a link to a resource at
https://example.org/dict.dat that is expected to produce a compression
dictionary:</t>
      <sourcecode type="http-message" markers="false" pn="section-3-6">
Link: &lt;https://example.org/dict.dat&gt;; rel="compression-dictionary"
</sourcecode>
    </section>
    <section anchor="dictionary-compressed-brotli" numbered="true" removeInRFC="false" toc="include" pn="section-4">
      <name slugifiedName="name-dictionary-compressed-brotl">Dictionary-Compressed Brotli</name>
      <t indent="0" pn="section-4-1">The "dcb" content encoding identifies a resource that is a
"Dictionary-Compressed Brotli" stream.</t>
      <t indent="0" pn="section-4-2">A "Dictionary-Compressed Brotli" stream has a fixed header that is followed by
a Shared Brotli <xref target="RFC9841" format="default" sectionFormat="of" derivedContent="SHARED-BROTLI"/> stream. The header consists of a fixed 4-byte
sequence and a 32-byte hash of the external dictionary that was used.  The
Shared Brotli stream is created using the referenced external dictionary and a
compression window that is at most 16 MB in size.</t>
      <t indent="0" pn="section-4-3">The dictionary used for the "dcb" content encoding is a "raw" dictionary type
as defined in <xref target="type" format="default" sectionFormat="of" derivedContent="Section 2.1.4"/> and is treated as a prefix dictionary as defined in
<xref target="RFC9841" sectionFormat="of" section="8.2" format="default" derivedLink="https://rfc-editor.org/rfc/rfc9841#section-8.2" derivedContent="SHARED-BROTLI"/>.</t>
      <t indent="0" pn="section-4-4">The 36-byte fixed header is as follows:</t>
      <dl indent="3" newline="false" spacing="normal" pn="section-4-5">
        <dt pn="section-4-5.1">Magic_Number:</dt>
        <dd pn="section-4-5.2">
          <t indent="0" pn="section-4-5.2.1">4 fixed bytes -- 0xff, 0x44, 0x43, 0x42.</t>
        </dd>
        <dt pn="section-4-5.3">SHA_256_Hash:</dt>
        <dd pn="section-4-5.4">
          <t indent="0" pn="section-4-5.4.1">32 bytes. SHA-256 hash digest of the dictionary <xref target="RFC6234" format="default" sectionFormat="of" derivedContent="SHA-256"/>.</t>
        </dd>
      </dl>
      <t indent="0" pn="section-4-6">Clients that announce support for dcb content encoding <bcp14>MUST</bcp14> be able to
decompress resources that were compressed with a window size of up to 16 MB.</t>
      <t indent="0" pn="section-4-7">With Brotli compression, the full dictionary is available during compression
and decompression independent of the compression window, allowing for
delta-compression of resources larger than the compression window.</t>
    </section>
    <section anchor="dictionary-compressed-zstandard" numbered="true" removeInRFC="false" toc="include" pn="section-5">
      <name slugifiedName="name-dictionary-compressed-zstan">Dictionary-Compressed Zstandard</name>
      <t indent="0" pn="section-5-1">The "dcz" content encoding identifies a resource that is a
"Dictionary-Compressed Zstandard" stream.</t>
      <t indent="0" pn="section-5-2">A "Dictionary-Compressed Zstandard" stream is a binary stream that starts with
a 40-byte fixed header and is followed by a Zstandard <xref target="RFC8878" format="default" sectionFormat="of" derivedContent="ZSTD"/> stream of the
response that has been compressed with an external dictionary.</t>
      <t indent="0" pn="section-5-3">The dictionary used for the "dcz" content encoding is a "raw" dictionary type
as defined in <xref target="type" format="default" sectionFormat="of" derivedContent="Section 2.1.4"/> and is treated as a raw dictionary as per <xref target="RFC8878" sectionFormat="of" section="5" format="default" derivedLink="https://rfc-editor.org/rfc/rfc8878#section-5" derivedContent="ZSTD"/>.</t>
      <t indent="0" pn="section-5-4">The 40-byte header consists of a fixed 8-byte sequence followed by the
32-byte SHA-256 hash of the external dictionary that was used to compress the
resource:</t>
      <dl indent="3" newline="false" spacing="normal" pn="section-5-5">
        <dt pn="section-5-5.1">Magic_Number:</dt>
        <dd pn="section-5-5.2">
          <t indent="0" pn="section-5-5.2.1">8 fixed bytes -- 0x5e, 0x2a, 0x4d, 0x18, 0x20, 0x00, 0x00, 0x00.</t>
        </dd>
        <dt pn="section-5-5.3">SHA_256_Hash:</dt>
        <dd pn="section-5-5.4">
          <t indent="0" pn="section-5-5.4.1">32 bytes. SHA-256 hash digest of the dictionary <xref target="RFC6234" format="default" sectionFormat="of" derivedContent="SHA-256"/>.</t>
        </dd>
      </dl>
      <t indent="0" pn="section-5-6">The 40-byte header is a Zstandard skippable frame (little-endian 0x184D2A5E)
with a 32-byte length (little-endian 0x00000020) that is compatible with
existing Zstandard decoders.</t>
      <t indent="0" pn="section-5-7">Clients that announce support for dcz content encoding <bcp14>MUST</bcp14> be able to
decompress resources that were compressed with a window size of at least 8 MB
or 1.25 times the size of the dictionary, whichever is greater, up to a
maximum of 128 MB.</t>
      <t indent="0" pn="section-5-8">The window size used will be encoded in the content (currently, this can be
expressed in powers of two only) and it <bcp14>MUST</bcp14> be lower than this limit. An
implementation <bcp14>MAY</bcp14> treat a window size that exceeds the limit as a decoding
error.</t>
      <t indent="0" pn="section-5-9">With Zstandard compression, the full dictionary is available during compression
and decompression until the size of the input exceeds the compression window.
Beyond that point, the dictionary becomes unavailable. Using a compression
window that is 1.25 times the size of the dictionary allows for full delta
compression of resources that have grown by 25% between releases while still
giving the client control over the memory it will need to allocate for a given
response.</t>
    </section>
    <section anchor="negotiating-the-content-encoding" numbered="true" removeInRFC="false" toc="include" pn="section-6">
      <name slugifiedName="name-negotiating-the-content-enc">Negotiating the Content Encoding</name>
      <t indent="0" pn="section-6-1">When a compression dictionary is available to compress the response to a given request, the encoding to be used is negotiated through the regular mechanism for negotiating content encoding in HTTP through the "Accept-Encoding" request header and "Content-Encoding" response header.</t>
      <t indent="0" pn="section-6-2">The dictionary to use is negotiated separately and advertised in the
"Available-Dictionary" request header.</t>
      <section anchor="accept-encoding" numbered="true" removeInRFC="false" toc="include" pn="section-6.1">
        <name slugifiedName="name-accept-encoding">Accept-Encoding</name>
        <t indent="0" pn="section-6.1-1">When a dictionary is available for use on a given request and the client
chooses to make dictionary-based content encoding available, the client adds
the dictionary-aware content encodings that it supports to the
"Accept-Encoding" request header. For example:</t>
        <sourcecode type="http-message" markers="false" pn="section-6.1-2">
Accept-Encoding: gzip, deflate, br, zstd, dcb, dcz
</sourcecode>
        <t indent="0" pn="section-6.1-3">When a client does not have a stored dictionary that matches the request or
chooses not to use one for the request, the client <bcp14>MUST NOT</bcp14> send its
dictionary-aware content encodings in the "Accept-Encoding" request header.</t>
      </section>
      <section anchor="content-encoding" numbered="true" removeInRFC="false" toc="include" pn="section-6.2">
        <name slugifiedName="name-content-encoding">Content-Encoding</name>
        <t indent="0" pn="section-6.2-1">If a server supports one of the dictionary encodings advertised by the client
and chooses to compress the content of the response using the dictionary that
the client has advertised, then it sets the "Content-Encoding" response header
to the appropriate value for the algorithm selected. For example:</t>
        <sourcecode type="http-message" markers="false" pn="section-6.2-2">
Content-Encoding: dcb
</sourcecode>
        <t indent="0" pn="section-6.2-3">If the response is cacheable, it <bcp14>MUST</bcp14> include a "Vary" header to prevent caches from
serving dictionary-compressed resources to clients that don't support them or
serving the response compressed with the wrong dictionary. For example:</t>
        <sourcecode type="http-message" markers="false" pn="section-6.2-4">
Vary: accept-encoding, available-dictionary
</sourcecode>
      </section>
    </section>
    <section anchor="iana-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-7">
      <name slugifiedName="name-iana-considerations">IANA Considerations</name>
      <section anchor="content-encoding-1" numbered="true" removeInRFC="false" toc="include" pn="section-7.1">
        <name slugifiedName="name-content-encoding-registrati">Content Encoding Registration</name>
        <t indent="0" pn="section-7.1-1">IANA has added the following entries to the "HTTP Content Coding
        Registry" maintained at <eref target="https://www.iana.org/assignments/http-parameters/" brackets="angle"/>:</t>
        <dl spacing="compact" newline="false" indent="3" pn="section-7.1-2">
          <dt pn="section-7.1-2.1">Name:</dt>
          <dd pn="section-7.1-2.2">dcb</dd>
          <dt pn="section-7.1-2.3">Description:</dt>
          <dd pn="section-7.1-2.4">"Dictionary-Compressed Brotli" data format.</dd>
          <dt pn="section-7.1-2.5">Reference:</dt>
          <dd pn="section-7.1-2.6">RFC 9842, <xref target="dictionary-compressed-brotli" format="default" sectionFormat="of" derivedContent="Section 4"/></dd>
        </dl>
        <dl spacing="compact" newline="false" indent="3" pn="section-7.1-3">
          <dt pn="section-7.1-3.1">Name:</dt>
          <dd pn="section-7.1-3.2">dcz</dd>
          <dt pn="section-7.1-3.3">Description:</dt>
          <dd pn="section-7.1-3.4">"Dictionary-Compressed Zstandard" data format.</dd>
          <dt pn="section-7.1-3.5">Reference:</dt>
          <dd pn="section-7.1-3.6">RFC 9842, <xref target="dictionary-compressed-zstandard" format="default" sectionFormat="of" derivedContent="Section 5"/></dd>
        </dl>
      </section>
      <section anchor="header-field-registration" numbered="true" removeInRFC="false" toc="include" pn="section-7.2">
        <name slugifiedName="name-header-field-registration">Header Field Registration</name>
        <t indent="0" pn="section-7.2-1">IANA has added the following entries to the
"Hypertext Transfer Protocol (HTTP) Field Name Registry" maintained at
<eref brackets="angle" target="https://www.iana.org/assignments/http-fields/"/>:</t>
        <table align="center" pn="table-1">
          <thead>
            <tr>
              <th align="left" colspan="1" rowspan="1">Field Name</th>
              <th align="left" colspan="1" rowspan="1">Status</th>
              <th align="left" colspan="1" rowspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="left" colspan="1" rowspan="1">Use-As-Dictionary</td>
              <td align="left" colspan="1" rowspan="1">permanent</td>
              <td align="left" colspan="1" rowspan="1">RFC 9842, <xref target="use-as-dictionary" format="default" sectionFormat="of" derivedContent="Section 2.1"/></td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">Available-Dictionary</td>
              <td align="left" colspan="1" rowspan="1">permanent</td>
              <td align="left" colspan="1" rowspan="1">RFC 9842, <xref target="available-dictionary" format="default" sectionFormat="of" derivedContent="Section 2.2"/></td>
            </tr>
            <tr>
              <td align="left" colspan="1" rowspan="1">Dictionary-ID</td>
              <td align="left" colspan="1" rowspan="1">permanent</td>
              <td align="left" colspan="1" rowspan="1">RFC 9842, <xref target="dictionary-id" format="default" sectionFormat="of" derivedContent="Section 2.3"/></td>
            </tr>
          </tbody>
        </table>
      </section>
      <section anchor="link-relation-registration" numbered="true" removeInRFC="false" toc="include" pn="section-7.3">
        <name slugifiedName="name-link-relation-registration">Link Relation Registration</name>
        <t indent="0" pn="section-7.3-1">IANA has added the following entry to the "Link Relation Types" registry
        maintained at <eref target="https://www.iana.org/assignments/link-relations/" brackets="angle"/>:</t>
        <dl spacing="compact" newline="false" indent="3" pn="section-7.3-2">
          <dt pn="section-7.3-2.1">Relation Name:</dt>
          <dd pn="section-7.3-2.2">compression-dictionary</dd>
          <dt pn="section-7.3-2.3">Description:</dt>
          <dd pn="section-7.3-2.4">Refers to a compression dictionary used for content encoding.</dd>
          <dt pn="section-7.3-2.5">Reference:</dt>
          <dd pn="section-7.3-2.6">RFC 9842, <xref target="the-compression-dictionary-link-relation-type" format="default" sectionFormat="of" derivedContent="Section 3"/></dd>
        </dl>
      </section>
    </section>
    <section anchor="compatibility-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-8">
      <name slugifiedName="name-compatibility-consideration">Compatibility Considerations</name>
      <t indent="0" pn="section-8-1">It is not unusual for devices to be on the network path that intercept,
inspect, and process HTTP requests (web proxies, firewalls, intrusion detection
systems, etc.). To minimize the risk of these devices incorrectly processing
dictionary-compressed responses, compression dictionary transport <bcp14>MUST</bcp14> only be
used in secure contexts (HTTPS).</t>
    </section>
    <section anchor="security-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-9">
      <name slugifiedName="name-security-considerations">Security Considerations</name>
      <t indent="0" pn="section-9-1">The security considerations for Brotli <xref target="RFC7932" format="default" sectionFormat="of" derivedContent="RFC7932"/>, Shared Brotli
<xref target="RFC9841" format="default" sectionFormat="of" derivedContent="SHARED-BROTLI"/>, and Zstandard <xref target="RFC8878" format="default" sectionFormat="of" derivedContent="ZSTD"/> apply to the
dictionary-based versions of the respective algorithms.</t>
      <section anchor="changing-content" numbered="true" removeInRFC="false" toc="include" pn="section-9.1">
        <name slugifiedName="name-changing-content">Changing Content</name>
        <t indent="0" pn="section-9.1-1">The dictionary must be treated with the same security precautions as
the content because a change to the dictionary can result in a
change to the decompressed content.</t>
        <t indent="0" pn="section-9.1-2">The dictionary is validated using an SHA-256 hash of the content to make sure
that the client and server are both using the same dictionary. The strength
of the SHA-256 hash algorithm isn't explicitly needed to counter attacks
since the dictionary is being served from the same origin as the content. That
said, if a weakness is discovered in SHA-256 and it is determined that the
dictionary negotiation should use a different hash algorithm, the
"Use-As-Dictionary" response header can be extended to specify a different
algorithm and the server would just ignore any "Available-Dictionary" requests
that do not use the updated hash.</t>
      </section>
      <section anchor="reading-content" numbered="true" removeInRFC="false" toc="include" pn="section-9.2">
        <name slugifiedName="name-reading-content">Reading Content</name>
        <t indent="0" pn="section-9.2-1">The compression attacks in <xref section="2.6" sectionFormat="of" target="RFC7457" format="default" derivedLink="https://rfc-editor.org/rfc/rfc7457#section-2.6" derivedContent="RFC7457"/> show that it's a bad idea
to compress data from mixed (e.g., public and private) sources. The data
sources include not only the compressed data but also the dictionaries. For
example, if secret cookies are compressed using a public-data-only dictionary,
information about the cookies is still leaked.</t>
        <t indent="0" pn="section-9.2-2">The dictionary can reveal information about the compressed
data and vice versa. That is, data compressed with the dictionary can reveal
contents of the dictionary when an adversary can control parts of
the data to compress and see the compressed size. On the other hand, if
the adversary can control the dictionary, the adversary can learn
information about the compressed data.</t>
      </section>
      <section anchor="security-mitigations" numbered="true" removeInRFC="false" toc="include" pn="section-9.3">
        <name slugifiedName="name-security-mitigations">Security Mitigations</name>
        <t indent="0" pn="section-9.3-1">If any of the mitigations do not pass, the client <bcp14>MUST</bcp14> drop the response and
return an error.</t>
        <section anchor="cross-origin-protection" numbered="true" removeInRFC="false" toc="include" pn="section-9.3.1">
          <name slugifiedName="name-cross-origin-protection">Cross-Origin Protection</name>
          <t indent="0" pn="section-9.3.1-1">To make sure that a dictionary can only impact content from the same origin
where the dictionary was served, the URL Pattern used for matching a dictionary
to requests (<xref target="match" format="default" sectionFormat="of" derivedContent="Section 2.1.1"/>) is guaranteed to be for the same origin that the
dictionary is served from.</t>
        </section>
        <section anchor="response-readability" numbered="true" removeInRFC="false" toc="include" pn="section-9.3.2">
          <name slugifiedName="name-response-readability">Response Readability</name>
          <t indent="0" pn="section-9.3.2-1">For clients, like web browsers, that provide additional protection against the
readability of the payload of a response and against user tracking, additional
protections <bcp14>MUST</bcp14> be taken to make sure that the use of dictionary-based
compression does not reveal information that would not otherwise be available.</t>
          <t indent="0" pn="section-9.3.2-2">In these cases, dictionary compression <bcp14>MUST</bcp14> only be used when both the
	  dictionary and the compressed response are fully readable by the client.</t>
          <t indent="0" pn="section-9.3.2-3">In browser terms, that means either the dictionary and compressed response are same-origin to the context they are being fetched from or the response is cross-origin and passes the Cross-Origin Resource Sharing (CORS) check (see <xref target="FETCH" section="4.9" relative="#cors-check" format="default" sectionFormat="of" derivedLink="https://fetch.spec.whatwg.org/#cors-check" derivedContent="FETCH"/>).</t>
        </section>
        <section anchor="server-responsibility" numbered="true" removeInRFC="false" toc="include" pn="section-9.3.3">
          <name slugifiedName="name-server-responsibility">Server Responsibility</name>
          <t indent="0" pn="section-9.3.3-1">As with any usage of compressed content in a secure context, a potential
timing attack exists if the attacker can control any part of the dictionary
or if it can read the dictionary and control any part of the content being
compressed while performing multiple requests that vary the dictionary or
injected content. Under such an attack, the changing size or processing time
of the response reveals information about the content, which might be
sufficient to read the supposedly secure response.</t>
          <t indent="0" pn="section-9.3.3-2">In general, a server can mitigate such attacks by preventing variations per
request, as in preventing active use of multiple dictionaries for the same
content, disabling compression when any portion of the content comes from
uncontrolled sources, and securing access and control over the dictionary
content in the same way as the response content. In addition, the following
requirements on a server are intended to disable dictionary-aware compression
when the client provides CORS request header fields that indicate a
cross-origin request context.</t>
          <t indent="0" pn="section-9.3.3-3">The following algorithm will return FALSE for cross-origin requests where
precautions such as not using dictionary-based compression should be
considered:</t>
          <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-9.3.3-4"><li pn="section-9.3.3-4.1" derivedCounter="1.">
              <t indent="0" pn="section-9.3.3-4.1.1">If there is no "Sec-Fetch-Site" request header, return TRUE.</t>
            </li>
            <li pn="section-9.3.3-4.2" derivedCounter="2.">
              <t indent="0" pn="section-9.3.3-4.2.1">If the value of the "Sec-Fetch-Site" request header is "same-origin",
return TRUE.</t>
            </li>
            <li pn="section-9.3.3-4.3" derivedCounter="3.">
              <t indent="0" pn="section-9.3.3-4.3.1">If there is no "Sec-Fetch-Mode" request header, return TRUE.</t>
            </li>
            <li pn="section-9.3.3-4.4" derivedCounter="4.">
              <t indent="0" pn="section-9.3.3-4.4.1">If the value of the "Sec-Fetch-Mode" request header is "navigate" or
"same-origin", return TRUE.</t>
            </li>
            <li pn="section-9.3.3-4.5" derivedCounter="5.">
              <t indent="0" pn="section-9.3.3-4.5.1">If the value of the "Sec-Fetch-Mode" request header is "cors":
              </t>
              <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-9.3.3-4.5.2">
                <li pn="section-9.3.3-4.5.2.1">
                  <t indent="0" pn="section-9.3.3-4.5.2.1.1">If the response does not include an "Access-Control-Allow-Origin" response header, return FALSE.</t>
                </li>
                <li pn="section-9.3.3-4.5.2.2">
                  <t indent="0" pn="section-9.3.3-4.5.2.2.1">If the request does not include an "Origin" request header, return FALSE.</t>
                </li>
                <li pn="section-9.3.3-4.5.2.3">
                  <t indent="0" pn="section-9.3.3-4.5.2.3.1">If the value of the "Access-Control-Allow-Origin" response header is "*", return TRUE.</t>
                </li>
                <li pn="section-9.3.3-4.5.2.4">
                  <t indent="0" pn="section-9.3.3-4.5.2.4.1">If the value of the "Access-Control-Allow-Origin" response header matches the value of the "Origin" request header, return TRUE.</t>
                </li>
              </ul>
            </li>
            <li pn="section-9.3.3-4.6" derivedCounter="6.">
              <t indent="0" pn="section-9.3.3-4.6.1">Return FALSE.</t>
            </li>
          </ol>
        </section>
      </section>
    </section>
    <section anchor="privacy-considerations" numbered="true" removeInRFC="false" toc="include" pn="section-10">
      <name slugifiedName="name-privacy-considerations">Privacy Considerations</name>
      <t indent="0" pn="section-10-1">Since dictionaries are advertised in future requests using the hash of the
content of the dictionary, it is possible to abuse the dictionary to turn it
into a tracking cookie.</t>
      <t indent="0" pn="section-10-2">To mitigate any additional tracking concerns, clients <bcp14>MUST</bcp14> treat dictionaries
in the same way that they treat cookies <xref target="RFC6265" format="default" sectionFormat="of" derivedContent="RFC6265"/>. 
This includes partitioning the storage using partitioning similar to or stricter than the partitioning used for cookies, as well as clearing the dictionaries whenever cookies are cleared.</t>
    </section>
  </middle>
  <back>
    <displayreference target="RFC8792" to="FOLDING"/>
    <displayreference target="RFC9110" to="HTTP"/>
    <displayreference target="RFC9111" to="HTTP-CACHING"/>
    <displayreference target="RFC6234" to="SHA-256"/>
    <displayreference target="RFC9841" to="SHARED-BROTLI"/>
    <displayreference target="RFC9651" to="STRUCTURED-FIELDS"/>
    <displayreference target="RFC3986" to="URL"/>
    <displayreference target="RFC8288" to="WEB-LINKING"/>
    <displayreference target="RFC8878" to="ZSTD"/>
    <references anchor="sec-combined-references" pn="section-11">
      <name slugifiedName="name-references">References</name>
      <references anchor="sec-normative-references" pn="section-11.1">
        <name slugifiedName="name-normative-references">Normative References</name>
        <reference anchor="FETCH" target="https://fetch.spec.whatwg.org/" quoteTitle="true" derivedAnchor="FETCH">
          <front>
            <title>Fetch Standard</title>
            <author>
              <organization showOnFrontPage="true">WHATWG</organization>
            </author>
            <date/>
          </front>
          <refcontent>WHATWG Living Standard</refcontent>
          <annotation>Commit snapshot: <eref brackets="angle" target="https://fetch.spec.whatwg.org/commit-snapshots/5a9680638ebfc2b3b7f4efb2bef0b579a2663951/"/></annotation>
        </reference>
        <reference anchor="RFC8792" target="https://www.rfc-editor.org/info/rfc8792" quoteTitle="true" derivedAnchor="FOLDING">
          <front>
            <title>Handling Long Lines in Content of Internet-Drafts and RFCs</title>
            <author fullname="K. Watsen" initials="K." surname="Watsen"/>
            <author fullname="E. Auerswald" initials="E." surname="Auerswald"/>
            <author fullname="A. Farrel" initials="A." surname="Farrel"/>
            <author fullname="Q. Wu" initials="Q." surname="Wu"/>
            <date month="June" year="2020"/>
            <abstract>
              <t indent="0">This document defines two strategies for handling long lines in width-bounded text content. One strategy, called the "single backslash" strategy, is based on the historical use of a single backslash ('\') character to indicate where line-folding has occurred, with the continuation occurring with the first character that is not a space character (' ') on the next line. The second strategy, called the "double backslash" strategy, extends the first strategy by adding a second backslash character to identify where the continuation begins and is thereby able to handle cases not supported by the first strategy. Both strategies use a self-describing header enabling automated reconstitution of the original content.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8792"/>
          <seriesInfo name="DOI" value="10.17487/RFC8792"/>
        </reference>
        <reference anchor="RFC9110" target="https://www.rfc-editor.org/info/rfc9110" quoteTitle="true" derivedAnchor="HTTP">
          <front>
            <title>HTTP Semantics</title>
            <author fullname="R. Fielding" initials="R." role="editor" surname="Fielding"/>
            <author fullname="M. Nottingham" initials="M." role="editor" surname="Nottingham"/>
            <author fullname="J. Reschke" initials="J." role="editor" surname="Reschke"/>
            <date month="June" year="2022"/>
            <abstract>
              <t indent="0">The Hypertext Transfer Protocol (HTTP) is a stateless application-level protocol for distributed, collaborative, hypertext information systems. This document describes the overall architecture of HTTP, establishes common terminology, and defines aspects of the protocol that are shared by all versions. In this definition are core protocol elements, extensibility mechanisms, and the "http" and "https" Uniform Resource Identifier (URI) schemes.</t>
              <t indent="0">This document updates RFC 3864 and obsoletes RFCs 2818, 7231, 7232, 7233, 7235, 7538, 7615, 7694, and portions of 7230.</t>
            </abstract>
          </front>
          <seriesInfo name="STD" value="97"/>
          <seriesInfo name="RFC" value="9110"/>
          <seriesInfo name="DOI" value="10.17487/RFC9110"/>
        </reference>
        <reference anchor="RFC9111" target="https://www.rfc-editor.org/info/rfc9111" quoteTitle="true" derivedAnchor="HTTP-CACHING">
          <front>
            <title>HTTP Caching</title>
            <author fullname="R. Fielding" initials="R." role="editor" surname="Fielding"/>
            <author fullname="M. Nottingham" initials="M." role="editor" surname="Nottingham"/>
            <author fullname="J. Reschke" initials="J." role="editor" surname="Reschke"/>
            <date month="June" year="2022"/>
            <abstract>
              <t indent="0">The Hypertext Transfer Protocol (HTTP) is a stateless application-level protocol for distributed, collaborative, hypertext information systems. This document defines HTTP caches and the associated header fields that control cache behavior or indicate cacheable response messages.</t>
              <t indent="0">This document obsoletes RFC 7234.</t>
            </abstract>
          </front>
          <seriesInfo name="STD" value="98"/>
          <seriesInfo name="RFC" value="9111"/>
          <seriesInfo name="DOI" value="10.17487/RFC9111"/>
        </reference>
        <reference anchor="RFC2119" target="https://www.rfc-editor.org/info/rfc2119" quoteTitle="true" derivedAnchor="RFC2119">
          <front>
            <title>Key words for use in RFCs to Indicate Requirement Levels</title>
            <author fullname="S. Bradner" initials="S." surname="Bradner"/>
            <date month="March" year="1997"/>
            <abstract>
              <t indent="0">In many standards track documents several words are used to signify the requirements in the specification. These words are often capitalized. This document defines these words as they should be interpreted in IETF documents. This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="2119"/>
          <seriesInfo name="DOI" value="10.17487/RFC2119"/>
        </reference>
        <reference anchor="RFC8174" target="https://www.rfc-editor.org/info/rfc8174" quoteTitle="true" derivedAnchor="RFC8174">
          <front>
            <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
            <author fullname="B. Leiba" initials="B." surname="Leiba"/>
            <date month="May" year="2017"/>
            <abstract>
              <t indent="0">RFC 2119 specifies common key words that may be used in protocol specifications. This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the defined special meanings.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="8174"/>
          <seriesInfo name="DOI" value="10.17487/RFC8174"/>
        </reference>
        <reference anchor="RFC6234" target="https://www.rfc-editor.org/info/rfc6234" quoteTitle="true" derivedAnchor="SHA-256">
          <front>
            <title>US Secure Hash Algorithms (SHA and SHA-based HMAC and HKDF)</title>
            <author fullname="D. Eastlake 3rd" initials="D." surname="Eastlake 3rd"/>
            <author fullname="T. Hansen" initials="T." surname="Hansen"/>
            <date month="May" year="2011"/>
            <abstract>
              <t indent="0">Federal Information Processing Standard, FIPS</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6234"/>
          <seriesInfo name="DOI" value="10.17487/RFC6234"/>
        </reference>
        <reference anchor="RFC9841" target="https://www.rfc-editor.org/info/rfc9841" quoteTitle="true" derivedAnchor="SHARED-BROTLI">
          <front>
            <title>Shared Brotli Compressed Data Format</title>
            <author initials="J." surname="Alakuijala" fullname="Jyrki Alakuijala">
              <organization showOnFrontPage="true">Google, Inc.</organization>
            </author>
            <author initials="T." surname="Duong" fullname="Thai Duong">
              <organization showOnFrontPage="true">Google, Inc.</organization>
            </author>
            <author initials="E." surname="Kliuchnikov" fullname="Evgenii Kliuchnikov">
              <organization showOnFrontPage="true">Google, Inc.</organization>
            </author>
            <author initials="Z." surname="Szabadka" fullname="Zoltan Szabadka">
              <organization showOnFrontPage="true">Google, Inc.</organization>
            </author>
            <author initials="L." surname="Vandevenne" fullname="Lode Vandevenne" role="editor">
              <organization showOnFrontPage="true">Google, Inc.</organization>
            </author>
            <date month="September" year="2025"/>
          </front>
          <seriesInfo name="RFC" value="9841"/>
          <seriesInfo name="DOI" value="10.17487/RFC9841"/>
        </reference>
        <reference anchor="RFC9651" target="https://www.rfc-editor.org/info/rfc9651" quoteTitle="true" derivedAnchor="STRUCTURED-FIELDS">
          <front>
            <title>Structured Field Values for HTTP</title>
            <author fullname="M. Nottingham" initials="M." surname="Nottingham"/>
            <author fullname="P-H. Kamp" surname="P-H. Kamp"/>
            <date month="September" year="2024"/>
            <abstract>
              <t indent="0">This document describes a set of data types and associated algorithms that are intended to make it easier and safer to define and handle HTTP header and trailer fields, known as "Structured Fields", "Structured Headers", or "Structured Trailers". It is intended for use by specifications of new HTTP fields.</t>
              <t indent="0">This document obsoletes RFC 8941.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="9651"/>
          <seriesInfo name="DOI" value="10.17487/RFC9651"/>
        </reference>
        <reference anchor="RFC3986" target="https://www.rfc-editor.org/info/rfc3986" quoteTitle="true" derivedAnchor="URL">
          <front>
            <title>Uniform Resource Identifier (URI): Generic Syntax</title>
            <author fullname="T. Berners-Lee" initials="T." surname="Berners-Lee"/>
            <author fullname="R. Fielding" initials="R." surname="Fielding"/>
            <author fullname="L. Masinter" initials="L." surname="Masinter"/>
            <date month="January" year="2005"/>
            <abstract>
              <t indent="0">A Uniform Resource Identifier (URI) is a compact sequence of characters that identifies an abstract or physical resource. This specification defines the generic URI syntax and a process for resolving URI references that might be in relative form, along with guidelines and security considerations for the use of URIs on the Internet. The URI syntax defines a grammar that is a superset of all valid URIs, allowing an implementation to parse the common components of a URI reference without knowing the scheme-specific requirements of every possible identifier. This specification does not define a generative grammar for URIs; that task is performed by the individual specifications of each URI scheme. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="STD" value="66"/>
          <seriesInfo name="RFC" value="3986"/>
          <seriesInfo name="DOI" value="10.17487/RFC3986"/>
        </reference>
        <reference anchor="URLPATTERN" target="https://urlpattern.spec.whatwg.org/" quoteTitle="true" derivedAnchor="URLPATTERN">
          <front>
            <title>URL Pattern Standard</title>
            <author>
              <organization showOnFrontPage="true">WHATWG</organization>
            </author>
            <date/>
          </front>
          <refcontent>WHATWG Living Standard</refcontent>
          <annotation>Commit snapshot: <eref brackets="angle" target="https://urlpattern.spec.whatwg.org/commit-snapshots/696b4029d52e5854044bac6b72cdb198cb962ed0/"/></annotation>
        </reference>
        <reference anchor="RFC8288" target="https://www.rfc-editor.org/info/rfc8288" quoteTitle="true" derivedAnchor="WEB-LINKING">
          <front>
            <title>Web Linking</title>
            <author fullname="M. Nottingham" initials="M." surname="Nottingham"/>
            <date month="October" year="2017"/>
            <abstract>
              <t indent="0">This specification defines a model for the relationships between resources on the Web ("links") and the type of those relationships ("link relation types").</t>
              <t indent="0">It also defines the serialisation of such links in HTTP headers with the Link header field.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8288"/>
          <seriesInfo name="DOI" value="10.17487/RFC8288"/>
        </reference>
        <reference anchor="RFC8878" target="https://www.rfc-editor.org/info/rfc8878" quoteTitle="true" derivedAnchor="ZSTD">
          <front>
            <title>Zstandard Compression and the 'application/zstd' Media Type</title>
            <author fullname="Y. Collet" initials="Y." surname="Collet"/>
            <author fullname="M. Kucherawy" initials="M." role="editor" surname="Kucherawy"/>
            <date month="February" year="2021"/>
            <abstract>
              <t indent="0">Zstandard, or "zstd" (pronounced "zee standard"), is a lossless data compression mechanism. This document describes the mechanism and registers a media type, content encoding, and a structured syntax suffix to be used when transporting zstd-compressed content via MIME.</t>
              <t indent="0">Despite use of the word "standard" as part of Zstandard, readers are advised that this document is not an Internet Standards Track specification; it is being published for informational purposes only.</t>
              <t indent="0">This document replaces and obsoletes RFC 8478.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8878"/>
          <seriesInfo name="DOI" value="10.17487/RFC8878"/>
        </reference>
      </references>
      <references anchor="sec-informative-references" pn="section-11.2">
        <name slugifiedName="name-informative-references">Informative References</name>
        <reference anchor="RFC5861" target="https://www.rfc-editor.org/info/rfc5861" quoteTitle="true" derivedAnchor="RFC5861">
          <front>
            <title>HTTP Cache-Control Extensions for Stale Content</title>
            <author fullname="M. Nottingham" initials="M." surname="Nottingham"/>
            <date month="May" year="2010"/>
            <abstract>
              <t indent="0">This document defines two independent HTTP Cache-Control extensions that allow control over the use of stale responses by caches. This document is not an Internet Standards Track specification; it is published for informational purposes.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="5861"/>
          <seriesInfo name="DOI" value="10.17487/RFC5861"/>
        </reference>
        <reference anchor="RFC6265" target="https://www.rfc-editor.org/info/rfc6265" quoteTitle="true" derivedAnchor="RFC6265">
          <front>
            <title>HTTP State Management Mechanism</title>
            <author fullname="A. Barth" initials="A." surname="Barth"/>
            <date month="April" year="2011"/>
            <abstract>
              <t indent="0">This document defines the HTTP Cookie and Set-Cookie header fields. These header fields can be used by HTTP servers to store state (called cookies) at HTTP user agents, letting the servers maintain a stateful session over the mostly stateless HTTP protocol. Although cookies have many historical infelicities that degrade their security and privacy, the Cookie and Set-Cookie header fields are widely used on the Internet. This document obsoletes RFC 2965. [STANDARDS-TRACK]</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="6265"/>
          <seriesInfo name="DOI" value="10.17487/RFC6265"/>
        </reference>
        <reference anchor="RFC7457" target="https://www.rfc-editor.org/info/rfc7457" quoteTitle="true" derivedAnchor="RFC7457">
          <front>
            <title>Summarizing Known Attacks on Transport Layer Security (TLS) and Datagram TLS (DTLS)</title>
            <author fullname="Y. Sheffer" initials="Y." surname="Sheffer"/>
            <author fullname="R. Holz" initials="R." surname="Holz"/>
            <author fullname="P. Saint-Andre" initials="P." surname="Saint-Andre"/>
            <date month="February" year="2015"/>
            <abstract>
              <t indent="0">Over the last few years, there have been several serious attacks on Transport Layer Security (TLS), including attacks on its most commonly used ciphers and modes of operation. This document summarizes these attacks, with the goal of motivating generic and protocol-specific recommendations on the usage of TLS and Datagram TLS (DTLS).</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7457"/>
          <seriesInfo name="DOI" value="10.17487/RFC7457"/>
        </reference>
        <reference anchor="RFC7932" target="https://www.rfc-editor.org/info/rfc7932" quoteTitle="true" derivedAnchor="RFC7932">
          <front>
            <title>Brotli Compressed Data Format</title>
            <author fullname="J. Alakuijala" initials="J." surname="Alakuijala"/>
            <author fullname="Z. Szabadka" initials="Z." surname="Szabadka"/>
            <date month="July" year="2016"/>
            <abstract>
              <t indent="0">This specification defines a lossless compressed data format that compresses data using a combination of the LZ77 algorithm and Huffman coding, with efficiency comparable to the best currently available general-purpose compression methods.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7932"/>
          <seriesInfo name="DOI" value="10.17487/RFC7932"/>
        </reference>
      </references>
    </references>
    <section anchor="authors-addresses" numbered="false" removeInRFC="false" toc="include" pn="section-appendix.a">
      <name slugifiedName="name-authors-addresses">Authors' Addresses</name>
      <author initials="P." surname="Meenan" fullname="Patrick Meenan" role="editor">
        <organization showOnFrontPage="true">Google LLC</organization>
        <address>
          <email>pmeenan@google.com</email>
        </address>
      </author>
      <author initials="Y." surname="Weiss" fullname="Yoav Weiss" role="editor">
        <organization showOnFrontPage="true">Shopify Inc.</organization>
        <address>
          <email>yoav.weiss@shopify.com</email>
        </address>
      </author>
    </section>
  </back>
</rfc>
