<?xml version='1.0' encoding='utf-8'?>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" version="3" category="std" docName="draft-ietf-bess-evpn-pref-df-13" number="9785" ipr="trust200902" submissionType="IETF" updates="8584" obsoletes="" xml:lang="en" consensus="true" tocInclude="true" tocDepth="3" symRefs="true" sortRefs="true" prepTime="2025-06-27T15:09:52" indexInclude="true" scripts="Common,Latin">
  <link href="https://datatracker.ietf.org/doc/draft-ietf-bess-evpn-pref-df-13" rel="prev"/>
  <link href="https://dx.doi.org/10.17487/rfc9785" rel="alternate"/>
  <link href="urn:issn:2070-1721" rel="alternate"/>
  <front>
    <title abbrev="Preference-Based EVPN DF Election">Preference-Based EVPN Designated Forwarder (DF) Election</title>
    <seriesInfo name="RFC" value="9785" stream="IETF"/>
    <author fullname="Jorge Rabadan" initials="J." role="editor" surname="Rabadan">
      <organization showOnFrontPage="true">Nokia</organization>
      <address>
        <postal>
          <street>520 Almanor Avenue</street>
          <city>Sunnyvale</city>
          <region>CA</region>
          <code>94085</code>
          <country>United States of America</country>
        </postal>
        <email>jorge.rabadan@nokia.com</email>
      </address>
    </author>
    <author fullname="Senthil Sathappan" initials="S." surname="Sathappan">
      <organization showOnFrontPage="true">Nokia</organization>
      <address>
        <email>senthil.sathappan@nokia.com</email>
      </address>
    </author>
    <author fullname="Wen Lin" initials="W." surname="Lin">
      <organization showOnFrontPage="true">Juniper Networks</organization>
      <address>
        <email>wlin@juniper.net</email>
      </address>
    </author>
    <author fullname="John Drake" initials="J." surname="Drake">
      <organization showOnFrontPage="true">Independent</organization>
      <address>
        <email>je_drake@yahoo.com</email>
      </address>
    </author>
    <author fullname="Ali Sajassi" initials="A." surname="Sajassi">
      <organization showOnFrontPage="true">Cisco Systems</organization>
      <address>
        <email>sajassi@cisco.com</email>
      </address>
    </author>
    <date month="06" year="2025"/>
    <area>RTG</area>
    <workgroup>bess</workgroup>
    <abstract pn="section-abstract">
      <t indent="0" pn="section-abstract-1">The Designated Forwarder (DF) in Ethernet Virtual Private Networks
      (EVPNs) is defined as the Provider Edge (PE) router responsible for
      sending Broadcast, Unknown Unicast, and Multicast (BUM) traffic to a
      multihomed device/network in the case of an All-Active multihoming
      Ethernet Segment (ES) or BUM and unicast in the case of Single-Active
      multihoming. The Designated Forwarder is selected out of a candidate
      list of PEs that advertise the same Ethernet Segment Identifier (ESI) to
      the EVPN network, according to the default DF election
      algorithm. While the default algorithm provides an efficient and
      automated way of selecting the Designated Forwarder across different
      Ethernet Tags in the Ethernet Segment, there are some use cases where a
      more "deterministic" and user-controlled method is required. At the same
      time, Network Operators require an easy way to force an on-demand
      Designated Forwarder switchover in order to carry out some maintenance
      tasks on the existing Designated Forwarder or control whether a new
      active PE can preempt the existing Designated Forwarder PE.</t>
      <t indent="0" pn="section-abstract-2">This document proposes use of a DF election algorithm that
      meets the requirements of determinism and operation control. This
      document updates RFC 8584 by modifying the definition of the DF Election
      Extended Community. </t>
    </abstract>
    <boilerplate>
      <section anchor="status-of-memo" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.1">
        <name slugifiedName="name-status-of-this-memo">Status of This Memo</name>
        <t indent="0" pn="section-boilerplate.1-1">
            This is an Internet Standards Track document.
        </t>
        <t indent="0" pn="section-boilerplate.1-2">
            This document is a product of the Internet Engineering Task Force
            (IETF).  It represents the consensus of the IETF community.  It has
            received public review and has been approved for publication by
            the Internet Engineering Steering Group (IESG).  Further
            information on Internet Standards is available in Section 2 of 
            RFC 7841.
        </t>
        <t indent="0" pn="section-boilerplate.1-3">
            Information about the current status of this document, any
            errata, and how to provide feedback on it may be obtained at
            <eref target="https://www.rfc-editor.org/info/rfc9785" brackets="none"/>.
        </t>
      </section>
      <section anchor="copyright" numbered="false" removeInRFC="false" toc="exclude" pn="section-boilerplate.2">
        <name slugifiedName="name-copyright-notice">Copyright Notice</name>
        <t indent="0" pn="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.
        </t>
        <t indent="0" pn="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<eref target="https://trustee.ietf.org/license-info" brackets="none"/>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.
        </t>
      </section>
    </boilerplate>
    <toc>
      <section anchor="toc" numbered="false" removeInRFC="false" toc="exclude" pn="section-toc.1">
        <name slugifiedName="name-table-of-contents">Table of Contents</name>
        <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1">
          <li pn="section-toc.1-1.1">
            <t indent="0" pn="section-toc.1-1.1.1"><xref derivedContent="1" format="counter" sectionFormat="of" target="section-1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-introduction">Introduction</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.1.2">
              <li pn="section-toc.1-1.1.2.1">
                <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.1.1"><xref derivedContent="1.1" format="counter" sectionFormat="of" target="section-1.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-problem-statement">Problem Statement</xref></t>
              </li>
              <li pn="section-toc.1-1.1.2.2">
                <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.2.1"><xref derivedContent="1.2" format="counter" sectionFormat="of" target="section-1.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-solution-requirements">Solution Requirements</xref></t>
              </li>
              <li pn="section-toc.1-1.1.2.3">
                <t indent="0" keepWithNext="true" pn="section-toc.1-1.1.2.3.1"><xref derivedContent="1.3" format="counter" sectionFormat="of" target="section-1.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-solution-overview">Solution Overview</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.2">
            <t indent="0" pn="section-toc.1-1.2.1"><xref derivedContent="2" format="counter" sectionFormat="of" target="section-2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-requirements-language-and-t">Requirements Language and Terminology</xref></t>
          </li>
          <li pn="section-toc.1-1.3">
            <t indent="0" pn="section-toc.1-1.3.1"><xref derivedContent="3" format="counter" sectionFormat="of" target="section-3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-evpn-bgp-attribute-extensio">EVPN BGP Attribute Extensions</xref></t>
          </li>
          <li pn="section-toc.1-1.4">
            <t indent="0" pn="section-toc.1-1.4.1"><xref derivedContent="4" format="counter" sectionFormat="of" target="section-4"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-solution-description">Solution Description</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.4.2">
              <li pn="section-toc.1-1.4.2.1">
                <t indent="0" pn="section-toc.1-1.4.2.1.1"><xref derivedContent="4.1" format="counter" sectionFormat="of" target="section-4.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-use-of-the-highest-preferen">Use of the Highest-Preference and Lowest-Preference Algorithm</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.2">
                <t indent="0" pn="section-toc.1-1.4.2.2.1"><xref derivedContent="4.2" format="counter" sectionFormat="of" target="section-4.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-use-of-the-highest-preferenc">Use of the Highest-Preference or Lowest-Preference Algorithm in Ethernet Segments</xref></t>
              </li>
              <li pn="section-toc.1-1.4.2.3">
                <t indent="0" pn="section-toc.1-1.4.2.3.1"><xref derivedContent="4.3" format="counter" sectionFormat="of" target="section-4.3"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-the-non-revertive-capabilit">The Non-Revertive Capability</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.5">
            <t indent="0" pn="section-toc.1-1.5.1"><xref derivedContent="5" format="counter" sectionFormat="of" target="section-5"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-security-considerations">Security Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.6">
            <t indent="0" pn="section-toc.1-1.6.1"><xref derivedContent="6" format="counter" sectionFormat="of" target="section-6"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-iana-considerations">IANA Considerations</xref></t>
          </li>
          <li pn="section-toc.1-1.7">
            <t indent="0" pn="section-toc.1-1.7.1"><xref derivedContent="7" format="counter" sectionFormat="of" target="section-7"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-references">References</xref></t>
            <ul bare="true" empty="true" indent="2" spacing="compact" pn="section-toc.1-1.7.2">
              <li pn="section-toc.1-1.7.2.1">
                <t indent="0" pn="section-toc.1-1.7.2.1.1"><xref derivedContent="7.1" format="counter" sectionFormat="of" target="section-7.1"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-normative-references">Normative References</xref></t>
              </li>
              <li pn="section-toc.1-1.7.2.2">
                <t indent="0" pn="section-toc.1-1.7.2.2.1"><xref derivedContent="7.2" format="counter" sectionFormat="of" target="section-7.2"/>.  <xref derivedContent="" format="title" sectionFormat="of" target="name-informative-references">Informative References</xref></t>
              </li>
            </ul>
          </li>
          <li pn="section-toc.1-1.8">
            <t indent="0" pn="section-toc.1-1.8.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.a"/><xref derivedContent="" format="title" sectionFormat="of" target="name-acknowledgements">Acknowledgements</xref></t>
          </li>
          <li pn="section-toc.1-1.9">
            <t indent="0" pn="section-toc.1-1.9.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.b"/><xref derivedContent="" format="title" sectionFormat="of" target="name-contributors">Contributors</xref></t>
          </li>
          <li pn="section-toc.1-1.10">
            <t indent="0" pn="section-toc.1-1.10.1"><xref derivedContent="" format="none" sectionFormat="of" target="section-appendix.c"/><xref derivedContent="" format="title" sectionFormat="of" target="name-authors-addresses">Authors' Addresses</xref></t>
          </li>
        </ul>
      </section>
    </toc>
  </front>
  <middle>
    <section anchor="sect-1" numbered="true" toc="include" removeInRFC="false" pn="section-1">
      <name slugifiedName="name-introduction">Introduction</name>
      <section anchor="sect-1.1" numbered="true" toc="include" removeInRFC="false" pn="section-1.1">
        <name slugifiedName="name-problem-statement">Problem Statement</name>
        <t indent="0" pn="section-1.1-1"><xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> defines the Designated Forwarder (DF) in
        EVPN networks as the PE responsible for sending Broadcast, Unknown
        Unicast, and Multicast (BUM) traffic to a multihomed device/network in
        the case of an All-Active multihoming Ethernet Segment or BUM and
        unicast traffic to a multihomed device or network in the case of
        Single-Active multihoming. The Designated Forwarder is selected out
        of a candidate list of PEs that advertise the Ethernet Segment
        Identifier (ESI) to the EVPN network and according to the DF election algorithm or to DF Alg as per <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>.</t>
        <t indent="0" pn="section-1.1-2">While the default DF algorithm or the Highest Random Weight (HRW) algorithm <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/> provide an efficient and automated way of selecting
        the Designated Forwarder across different Ethernet Tags in the
        Ethernet Segment, there are some use cases where a more
        user-controlled method is required. At the same time, Network
        Operators require an easy way to force an on-demand  Designated Forwarder switchover in order to carry out some maintenance tasks on
        the existing Designated Forwarder or control whether a new active PE
        can preempt the existing Designated Forwarder PE.</t>
      </section>
      <section anchor="sect-1.2" numbered="true" toc="include" removeInRFC="false" pn="section-1.2">
        <name slugifiedName="name-solution-requirements">Solution Requirements</name>
        <t indent="0" pn="section-1.2-1">The procedures described in this document meet the following
        requirements:</t>
        <ol spacing="normal" type="a" indent="adaptive" start="1" pn="section-1.2-2"><li pn="section-1.2-2.1" derivedCounter="a.">
            <t indent="0" pn="section-1.2-2.1.1">The solution provides an administrative preference option so
            that the user can control in what order the candidate PEs may
            become the Designated Forwarder, assuming they are all operationally
            ready to take over as the Designated Forwarder. The operator can
            determine whether the Highest-Preference or Lowest-Preference PE
            among the PEs in the Ethernet Segment will be elected as
            the Designated Forwarder, based on the DF algorithms described in this
            document.</t>
          </li>
          <li pn="section-1.2-2.2" derivedCounter="b.">
            <t indent="0" pn="section-1.2-2.2.1">The extensions described in this document work for Ethernet Segments <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> and virtual Ethernet
            Segments as defined in <xref target="RFC9784" format="default" sectionFormat="of" derivedContent="RFC9784"/>.</t>
          </li>
          <li pn="section-1.2-2.3" derivedCounter="c.">
            <t indent="0" pn="section-1.2-2.3.1">The user may force a PE to preempt the existing Designated
            Forwarder for a given Ethernet Tag without reconfiguring all the
            PEs in the Ethernet Segment, by simply modifying the existing
            administrative preference in that PE.</t>
          </li>
          <li anchor="DP-capability" pn="section-1.2-2.4" derivedCounter="d.">
            <t indent="0" pn="section-1.2-2.4.1">The solution allows an option to NOT preempt the current
            Designated Forwarder (the "Don't Preempt" Capability), even if the
            former Designated Forwarder PE comes back up after a failure. This
            is also known as "non-revertive" behavior, as opposed to the DF election procedures <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> that
            are always revertive (because the winner PE of the default
            DF election algorithm always takes over as the
            operational Designated Forwarder).</t>
          </li>
          <li pn="section-1.2-2.5" derivedCounter="e.">
            <t indent="0" pn="section-1.2-2.5.1">The procedures described in this document support Single-Active
            and All-Active multihoming Ethernet Segments.</t>
          </li>
        </ol>
      </section>
      <section anchor="sect-1.3" numbered="true" toc="include" removeInRFC="false" pn="section-1.3">
        <name slugifiedName="name-solution-overview">Solution Overview</name>
        <t indent="0" pn="section-1.3-1">To provide a solution that satisfies the above requirements, we
        introduce two new DF algorithms that can be advertised in the DF
        Election Extended Community (<xref target="sect-3" format="default" sectionFormat="of" derivedContent="Section 3"/>). Carried with the
        new DF Election Extended Community variants is a DF election
        preference advertised for each PE that influences which PE will
        become the DF (<xref target="sect-4.1" format="default" sectionFormat="of" derivedContent="Section 4.1"/>). The advertised DF election
        preference can dynamically vary from the administratively configured
        preference to provide non-revertive behavior (<xref target="sect-4.3" format="default" sectionFormat="of" derivedContent="Section 4.3"/>). In <xref target="sect-4.2" format="default" sectionFormat="of" derivedContent="Section 4.2"/>, an optional solution is discussed for use in Ethernet Segments that supports large numbers of Ethernet Tags and therefore needs to balance load among
        multiple DFs. </t>
      </section>
    </section>
    <section anchor="sect-2" numbered="true" toc="include" removeInRFC="false" pn="section-2">
      <name slugifiedName="name-requirements-language-and-t">Requirements Language and Terminology</name>
      <t indent="0" pn="section-2-1">
    The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
    "<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
    described in BCP 14 <xref target="RFC2119" format="default" sectionFormat="of" derivedContent="RFC2119"/> <xref target="RFC8174" format="default" sectionFormat="of" derivedContent="RFC8174"/> 
    when, and only when, they appear in all capitals, as shown here.
      </t>
      <dl spacing="normal" newline="false" indent="3" pn="section-2-2">
        <dt pn="section-2-2.1">AC:</dt>
        <dd pn="section-2-2.2">Attachment Circuit. An AC has an Ethernet Tag
        associated to it.</dd>
        <dt pn="section-2-2.3">CE:</dt>
        <dd pn="section-2-2.4">Customer Equipment router</dd>
        <dt pn="section-2-2.5">DF:</dt>
        <dd pn="section-2-2.6">Designated Forwarder</dd>
        <dt pn="section-2-2.7">DF Alg:</dt>
        <dd pn="section-2-2.8">Refers to the DF election
        algorithm, which is sometimes shortened to "Alg" in this document.</dd>
        <dt pn="section-2-2.9">DP:</dt>
        <dd pn="section-2-2.10">Refers to the "Don't Preempt" Capability in the
        DF Election Extended Community.</dd>
        <dt pn="section-2-2.11">ENNI:</dt>
        <dd pn="section-2-2.12">External Network-Network Interface</dd>
        <dt pn="section-2-2.13">ES and vES:</dt>
        <dd pn="section-2-2.14">Ethernet Segment and virtual Ethernet Segment.</dd>
        <dt pn="section-2-2.15">Ethernet A-D per EVI route:</dt>
        <dd pn="section-2-2.16">Refers to Route Type 1 or Auto-Discovery per
        EVPN Instance route <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</dd>
        <dt pn="section-2-2.17">EVC:</dt>
        <dd pn="section-2-2.18">Ethernet Virtual Circuit</dd>
        <dt pn="section-2-2.19">EVI:</dt>
        <dd pn="section-2-2.20">EVPN Instance</dd>
        <dt pn="section-2-2.21">Ethernet Tag:</dt>
        <dd pn="section-2-2.22">Used to represent a broadcast domain that is
        configured on a given Ethernet Segment for the purpose of DF election. Note that any of the following may be used to
        represent a broadcast domain: VLAN IDs (VIDs) (including Q-in-Q tags), configured
        IDs, VXLAN Network Identifiers (VNIs), normalized VIDs, Service
        Instance Identifiers (I-SIDs), etc., as long as the representation of the
        broadcast domains is configured consistently across the multihomed
        PEs attached to that Ethernet Segment. The Ethernet Tag value
        <bcp14>MUST NOT</bcp14> be zero.</dd>
        <dt pn="section-2-2.23">HRW:</dt>
        <dd pn="section-2-2.24">Highest Random Weight, as per <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>.</dd>
        <dt pn="section-2-2.25">OAM:</dt>
        <dd pn="section-2-2.26">Operations, Administration, and Maintenance.</dd>
      </dl>
    </section>
    <section anchor="sect-3" numbered="true" toc="include" removeInRFC="false" pn="section-3">
      <name slugifiedName="name-evpn-bgp-attribute-extensio">EVPN BGP Attribute Extensions</name>
      <t indent="0" pn="section-3-1">This solution reuses and extends the DF Election
      Extended Community defined in <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/> that is
      advertised along with the Ethernet Segment route. It does so by
      replacing the last two reserved octets of the DF Election Extended
      Community when the DF algorithm is set to Highest-Preference or
      Lowest-Preference. This document also defines a new capability referred
      to as the "Don't Preempt" Capability, which <bcp14>MAY</bcp14> be used with
      Highest-Preference or Lowest-Preference Algorithms. The format of the
      DF Election Extended Community used in this document is as
      follows:</t>
      <figure anchor="df-election-extended-community" align="left" suppress-title="false" pn="figure-1">
        <name slugifiedName="name-df-election-extended-commun">DF Election Extended Community</name>
        <artwork name="" type="" align="left" alt="" pn="section-3-2.1">
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Type=0x06     | Sub-Type(0x06)| RSV |  DF Alg |    Bitmap     ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~     Bitmap    |   Reserved    |   DF Preference (2 octets)    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</artwork>
      </figure>
      <t indent="0" pn="section-3-3">Where the above fields are defined as follows:</t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3-4">
        <li pn="section-3-4.1">
          <t indent="0" pn="section-3-4.1.1">The DF algorithm can have the following values:</t>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3-4.1.2">
            <li pn="section-3-4.1.2.1">Alg 0 - Default DF election algorithm, i.e.,
            the modulus-based algorithm as per <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</li>
            <li pn="section-3-4.1.2.2">Alg 1 - HRW algorithm as per <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>.</li>
            <li pn="section-3-4.1.2.3">Alg 2 - Highest-Preference Algorithm (<xref target="sect-4.1" format="default" sectionFormat="of" derivedContent="Section 4.1"/>).</li>
            <li pn="section-3-4.1.2.4">Alg 3 - Lowest-Preference Algorithm (<xref target="sect-4.1" format="default" sectionFormat="of" derivedContent="Section 4.1"/>).</li>
          </ul>
        </li>
        <li pn="section-3-4.2">
          <t indent="0" pn="section-3-4.2.1">Bitmap (2 octets) encodes "capabilities" <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>, whereas this document defines the "Don't Preempt"
        Capability, which is used to indicate if a PE supports a non-revertive
        behavior:</t>
          <figure anchor="bitmap-field-in-the-df-election-extended-community" align="left" suppress-title="false" pn="figure-2">
            <name slugifiedName="name-bitmap-field-in-the-df-elec">Bitmap Field in the DF Election Extended Community</name>
            <artwork name="" type="" align="left" alt="" pn="section-3-4.2.2.1">
                       1 1 1 1 1 1
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |D|A|                           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</artwork>
          </figure>
          <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-3-4.2.3">
            <li pn="section-3-4.2.3.1">Bit 0 (corresponds to Bit 24 of the DF
            Election Extended Community, and it is defined by this document):
            The D bit, or "Don't Preempt" Capability, determines if the
            PE advertising the Ethernet Segment route requests the remote PEs
            in the Ethernet Segment to not preempt it as the Designated
            Forwarder. The default value is DP=0, which is compatible with the
            'preempt' or 'revertive' behavior in the default DF algorithm
            <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>. The "Don't Preempt" Capability is
            supported by the Highest-Preference or Lowest-Preference
            Algorithms. The procedures of the "Don't Preempt" Capability for
            other DF algorithms are out of the scope of this document. The
            procedures of the "Don't Preempt" Capability for the
            Highest-Preference and Lowest-Preference Algorithms are
            described in <xref target="sect-4.1" format="default" sectionFormat="of" derivedContent="Section 4.1"/>.</li>
            <li pn="section-3-4.2.3.2">Bit 1: AC-Influenced DF (AC-DF) election is
            described in <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>. When set
            to 1, it indicates the desire to use AC-DF with the rest of the PEs
	    in the Ethernet
            Segment. The AC-DF capability bit <bcp14>MAY</bcp14> be set along
            with the "Don't Preempt" Capability and Highest-Preference or
            Lowest-Preference Algorithms.</li>
          </ul>
        </li>
        <li pn="section-3-4.3">Designated Forwarder (DF) Preference:
        Defines a 2-octet value that indicates the PE preference to become the
        Designated Forwarder in the Ethernet Segment, as described in <xref target="sect-4.1" format="default" sectionFormat="of" derivedContent="Section 4.1"/>. The allowed values are within
        the range 0-65535, and the default value <bcp14>MUST</bcp14> be
        32767. This value is the midpoint in the allowed Preference range of
        values, which gives the operator the flexibility of choosing a
        significant number of values, above or below the default Preference. A
        numerically higher or lower value of this field is more preferred for
        DF election depending on the DF algorithm being
        used, as explained in <xref target="sect-4.1" format="default" sectionFormat="of" derivedContent="Section 4.1"/>. The
        Designated Forwarder Preference field is specific to 
        Highest-Preference and Lowest-Preference Algorithms, and this document does not
        define any meaning for other algorithms. If the DF algorithm is
        different from Highest-Preference or Lowest-Preference, these 2
        octets can be encoded differently.</li>
        <li pn="section-3-4.4">RSV and Reserved fields (from bit 16 to bit 18, and from bit 40 to
        47): When the DF algorithm is set to Highest-Preference or
        Lowest-Preference, the values are set to zero when
        advertising the Ethernet Segment route, and they are ignored when
        receiving the Ethernet Segment route.</li>
      </ul>
    </section>
    <section anchor="sect-4" numbered="true" toc="include" removeInRFC="false" pn="section-4">
      <name slugifiedName="name-solution-description">Solution Description</name>
      <t indent="0" pn="section-4-1"><xref target="es-and-deterministic-df-election" format="default" sectionFormat="of" derivedContent="Figure 3"/> illustrates an
      example that will be used in the description of the solution.</t>
      <figure anchor="es-and-deterministic-df-election" align="left" suppress-title="false" pn="figure-3">
        <name slugifiedName="name-preference-based-df-electio">Preference-Based DF Election</name>
        <artwork name="" type="" align="left" alt="" pn="section-4-2.1">
              EVPN Network
         +-------------------+
         |                +-------+  ENNI    Aggregation
         |   &lt;---ESI1,500 |  PE1  |   /\  +----Network---+
         | &lt;-----ESI2,100 |       |===||===              |
         |                |       |===||== \      vES1   |  +----+
     +-----+              |       |   \/  |\----------------+CE1 |
CE3--+ PE4 |              +-------+       | \   ------------+    |
     +-----+                 |            |  \ /         |  +----+
         |                   |            |   X          |
         |   &lt;---ESI1,255  +-----+============ \         |
         | &lt;-----ESI2,200  | PE2 |==========    \ vES2   | +----+
         |                 +-----+        | \    ----------+CE2 |
         |                   |            |  --------------+    |
         |                 +-----+   ----------------------+    |
         | &lt;-----ESI2,300  | PE3 +--/     |              | +----+
         |                 +-----+        +--------------+
         --------------------+</artwork>
      </figure>
      <t indent="0" pn="section-4-3"><xref target="es-and-deterministic-df-election" format="default" sectionFormat="of" derivedContent="Figure 3"/> shows three PEs
      that are connecting EVCs coming from the Aggregation Network to their
      EVIs in the EVPN network. CE1 is connected to vES1, which spans PE1 and
      PE2, and CE2 is connected to vES2, which is attached to PE1, PE2, and
      PE3.</t>
      <t indent="0" pn="section-4-4">If the algorithm chosen for vES1 and vES2 is the
      Highest-Preference or Lowest-Preference Algorithm, the PEs may become the Designated
      Forwarder irrespective of their IP address and based on the
      administrative preference value. The following sections provide some
      examples of the procedures and how they are applied in the use case of
      <xref target="es-and-deterministic-df-election" format="default" sectionFormat="of" derivedContent="Figure 3"/>.</t>
      <section anchor="sect-4.1" numbered="true" toc="include" removeInRFC="false" pn="section-4.1">
        <name slugifiedName="name-use-of-the-highest-preferen">Use of the Highest-Preference and Lowest-Preference Algorithm</name>
        <t indent="0" pn="section-4.1-1">Assuming the operator wants to control -- in a flexible way -- what
        PE becomes the Designated Forwarder for a given virtual Ethernet
        Segment and the order in which the PEs become a Designated Forwarder in
        case of multiple failures, the Highest-Preference or Lowest-Preference
        Algorithms can be used. Per the example in <xref target="es-and-deterministic-df-election" format="default" sectionFormat="of" derivedContent="Figure 3"/>, these
	algorithms are used
        as follows:</t>
        <ol spacing="normal" type="a" indent="adaptive" start="1" pn="section-4.1-2">
          <li pn="section-4.1-2.1" derivedCounter="a.">
            <t indent="0" pn="section-4.1-2.1.1">vES1 and vES2 are now configurable with three optional
	  parameters that are signaled in the DF Election
	  Extended Community. These parameters are the Preference,
	  Preemption (or "Don't Preempt" Capability) option, and DF algorithm. We will
	  represent these parameters as (Pref, DP, Alg).  For instance, vES1
	  (Pref, DP, Alg) is configured as:</t>
            <ul empty="true" spacing="compact" bare="false" indent="3" pn="section-4.1-2.1.2">
              <li pn="section-4.1-2.1.2.1">(500, 0, Highest-Preference) in PE1,</li>
              <li pn="section-4.1-2.1.2.2">(255, 0, Highest-Preference) in PE2.</li>
            </ul>
            <t indent="0" pn="section-4.1-2.1.3">vES2 is configured as:</t>
            <ul empty="true" spacing="compact" bare="false" indent="3" pn="section-4.1-2.1.4">
              <li pn="section-4.1-2.1.4.1">(100, 0, Highest-Preference) in PE1,</li>
              <li pn="section-4.1-2.1.4.2">(200, 0, Highest-Preference) in PE2, and</li>
              <li pn="section-4.1-2.1.4.3">(300, 0, Highest-Preference) in PE3.</li>
            </ul>
          </li>
          <li pn="section-4.1-2.2" derivedCounter="b.">
            <t indent="0" pn="section-4.1-2.2.1">The PEs advertise an Ethernet Segment route for each virtual
            Ethernet Segment, including the three parameters indicated in (a)
            above, in the DF Election Extended Community
            (encoded as described in <xref target="sect-3" format="default" sectionFormat="of" derivedContent="Section 3"/>).</t>
          </li>
          <li pn="section-4.1-2.3" derivedCounter="c.">
            <t indent="0" pn="section-4.1-2.3.1">According to <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>, each PE will run the
            DF election algorithm upon expiration of the DF
            Wait timer. Each PE runs the Highest-Preference or
            Lowest-Preference Algorithm for each Ethernet Segment as
            follows: </t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.1-2.3.2">
              <li pn="section-4.1-2.3.2.1">
                <t indent="0" pn="section-4.1-2.3.2.1.1">The PE will check the DF algorithm value in each Ethernet
                Segment route, and assuming all the Ethernet Segment routes
                (including the local route) are consistent in this DF
                algorithm (that is, all are configured for Highest-Preference
                or Lowest-Preference, but not a mix), the PE runs the
                procedure in this section. Otherwise, the procedure falls back
                to the default DF algorithm <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.
                The Highest-Preference and Lowest-Preference Algorithms are
                different algorithms; therefore, if two PEs configured for
                Highest-Preference and Lowest-Preference, respectively, are
                attached to the same Ethernet Segment, the operational
                DF election algorithm will fall back to the
                default DF algorithm.</t>
              </li>
              <li pn="section-4.1-2.3.2.2">
                <t indent="0" pn="section-4.1-2.3.2.2.1">If all the PEs attached to the Ethernet Segment advertise
                the Highest-Preference Algorithm, each PE builds a list of
                candidate PEs, ordered by preference value from the
                numerically highest value to lowest value. For example, PE1 builds a
                list of candidate PEs for vES1 ordered by the Preference, from
                high to low: &lt;PE1, PE2&gt; (since PE1's preference is more
                preferred than PE2's). Hence, PE1 becomes the Designated
                Forwarder for vES1. In the same way, PE3 becomes the
                Designated Forwarder for vES2.</t>
              </li>
              <li pn="section-4.1-2.3.2.3">
                <t indent="0" pn="section-4.1-2.3.2.3.1">If all the PEs attached to the Ethernet Segment advertise
                the Lowest-Preference Algorithm, then the candidate list is
                ordered from the numerically lowest preference value to the
                highest preference value. For example, PE1's ordered list for vES1 is
                &lt;PE2, PE1&gt;. Hence, PE2 becomes the Designated Forwarder
                for vES1. In the same way, PE1 becomes the Designated
                Forwarder for vES2.</t>
              </li>
            </ul>
          </li>
          <li pn="section-4.1-2.4" derivedCounter="d.">
            <t indent="0" pn="section-4.1-2.4.1">Assuming some maintenance tasks had to be executed on a PE, the
            operator may want to make sure the PE is not the Designated
            Forwarder for the Ethernet Segment so that the impact on the
            service is minimized. For example, if PE3 is going on maintenance and the
            DF algorithm is Highest-Preference, the operator could change
            vES2's Preference on PE3 from 300 to, e.g., 50 (hence, the Ethernet
            Segment route from PE3 is updated with the new preference value),
            so that PE2 is forced to take over as Designated Forwarder for
            vES2 (irrespective of the "Don't Preempt" Capability). Once the maintenance
            task on PE3 is over, the operator could decide to leave the latest
            configured preference value or configure the initial preference
            value back. A similar procedure can be used for the
            Lowest-Preference Algorithm too. For example, suppose the algorithm for vES2 is
            Lowest-Preference, and PE1 (the DF) goes on maintenance mode. The
            operator could change vES2's Preference on PE1 from 100 to, e.g.,
            250, so that PE2 is forced to take over as the Designated Forwarder
            for vES2.</t>
          </li>
          <li pn="section-4.1-2.5" derivedCounter="e.">
            <t indent="0" pn="section-4.1-2.5.1">In case of equal Preference in two or more PEs in the Ethernet
            Segment, the "Don't Preempt" Capability and the numerically lowest IP address of the
            candidate PE(s) are used as tiebreakers. The procedures for the
            use of the "Don't Preempt" Capability are specified in <xref target="sect-4.3" format="default" sectionFormat="of" derivedContent="Section 4.3"/>. If
            more than one PE is advertising itself as the preferred Designated
            Forwarder, an implementation <bcp14>MUST</bcp14> first select the PE advertising
            the "Don't Preempt" Capability set, and then select the PE with the lowest IP address
            (if the "Don't Preempt" Capability selection does not yield a unique candidate). The
            PE's IP address is the address used in the candidate list, and it
            is derived from the Originating Router's IP address of the
            Ethernet Segment route. In case PEs use the Originating Router's
            IP address of different families, an IPv4 address is always
            considered numerically lower than an IPv6 address. Some examples
            of using the "Don't Preempt" Capability and IP address tiebreakers follow: </t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.1-2.5.2">
              <li pn="section-4.1-2.5.2.1">
                <t indent="0" pn="section-4.1-2.5.2.1.1">If vES1 parameters were (500, 0, Highest-Preference) in PE1
                and (500, 1, Highest-Preference) in PE2, PE2 would be elected
                due to the "Don't Preempt" Capability. The same example applies if PE1 and PE2
                advertise the Lowest-Preference Algorithm instead.</t>
              </li>
              <li pn="section-4.1-2.5.2.2">
                <t indent="0" pn="section-4.1-2.5.2.2.1">If vES1 parameters were (500, 0, Highest-Preference) in PE1
                and (500, 0, Highest-Preference) in PE2, PE1 would be elected,
                if PE1's IP address is lower than PE2's. Or PE2 would be
                elected if PE2's IP address is lower than PE1's. The same
                example applies if PE1 and PE2 advertise the Lowest-Preference
                Algorithm instead.</t>
              </li>
            </ul>
          </li>
          <li pn="section-4.1-2.6" derivedCounter="f.">
            <t indent="0" pn="section-4.1-2.6.1">The Preference is an administrative option that <bcp14>MUST</bcp14> be
            configured on a per-Ethernet-Segment basis, and it is normally
            configured from the management plane. The preference value <bcp14>MAY</bcp14>
            also be dynamically changed based on the use of local policies
            that react to events on the PE. The following examples illustrate
            the use of local policy to change the preference value in a
            dynamic way.</t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.1-2.6.2">
              <li pn="section-4.1-2.6.2.1">
                <t indent="0" pn="section-4.1-2.6.2.1.1">On PE1, if the DF algorithm is Highest-Preference,
                ES1's preference value can be lowered from 500 to 100 in case
                the bandwidth on the ENNI port is decreased by 50% (that could
                happen if, e.g., the 2-port Link Aggregation Group between PE1
                and the Aggregation Network loses one port).</t>
              </li>
              <li pn="section-4.1-2.6.2.2">
                <t indent="0" pn="section-4.1-2.6.2.2.1">Local policy <bcp14>MAY</bcp14> also trigger dynamic Preference changes
                based on the PE's bandwidth availability in the core, specific
                ports going operationally down, etc.</t>
              </li>
              <li pn="section-4.1-2.6.2.3">
                <t indent="0" pn="section-4.1-2.6.2.3.1">The definition of the actual local policies is out of scope
                of this document.</t>
              </li>
            </ul>
          </li>
        </ol>
        <t indent="0" pn="section-4.1-3">Highest-Preference and Lowest-Preference Algorithms <bcp14>MAY</bcp14> be used
        along with the AC-DF capability. Assuming all the PEs in the Ethernet
        Segment are configured consistently with the Highest-Preference or
        Lowest-Preference Algorithm and AC-DF capability, a given PE in the
        Ethernet Segment is not considered as a candidate for DF election until its corresponding Ethernet A-D per ES and
        Ethernet A-D per EVI routes are received, as described in <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>.</t>
        <t indent="0" pn="section-4.1-4">Highest-Preference and Lowest-Preference Algorithms can be
        used in different virtual Ethernet Segments on the same PE. For
        instance, PE1 and PE2 can use Highest-Preference for vES1 and PE1, and PE2
        and PE3 can use Lowest-Preference for vES2. The use of one DF algorithm over
        the other is the operator's choice. The existence of both provides
        flexibility and full control to the operator.</t>
        <t indent="0" pn="section-4.1-5">The procedures in this document can be used in an Ethernet Segment as defined in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> or a virtual Ethernet Segment per <xref target="RFC9784" format="default" sectionFormat="of" derivedContent="RFC9784"/> and
        also in EVPN networks as described in <xref target="RFC8214" format="default" sectionFormat="of" derivedContent="RFC8214"/>, <xref target="RFC7623" format="default" sectionFormat="of" derivedContent="RFC7623"/>, or <xref target="RFC8365" format="default" sectionFormat="of" derivedContent="RFC8365"/>.</t>
      </section>
      <section anchor="sect-4.2" numbered="true" toc="include" removeInRFC="false" pn="section-4.2">
        <name slugifiedName="name-use-of-the-highest-preferenc">Use of the Highest-Preference or Lowest-Preference Algorithm in Ethernet Segments</name>
        <t indent="0" pn="section-4.2-1">While the Highest-Preference or Lowest-Preference Algorithm
        described in <xref target="sect-4.1" format="default" sectionFormat="of" derivedContent="Section 4.1"/> is typically used in virtual
        Ethernet Segment scenarios where there is normally an individual
        Ethernet Tag per virtual Ethernet Segment, the existing definition of an Ethernet Segment <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> allows
        potentially up to thousands of Ethernet Tags on the same Ethernet
        Segment. If this is the case, and if the Highest-Preference or
        Lowest-Preference Algorithm is configured in all the PEs of the
        Ethernet Segment, the same PE will be the elected Designated Forwarder
        for all the Ethernet Tags of the Ethernet Segment. A potential way to
        achieve a more granular load balancing is described below.</t>
        <t indent="0" pn="section-4.2-2">The Ethernet Segment is configured with an administrative
        preference value and an administrative DF algorithm, i.e.,
        Highest-Preference or Lowest-Preference Algorithm. However, the
        administrative DF algorithm (which is used to signal the DF algorithm
        for the Ethernet Segment) <bcp14>MAY</bcp14> be overridden to a different operational
        DF algorithm for a range of Ethernet Tags. With this option, the PE
        builds a list of candidate PEs ordered by Preference; however, the
        Designated Forwarder for a given Ethernet Tag will be determined by
        the locally overridden DF algorithm.</t>
        <t indent="0" pn="section-4.2-3">For instance:</t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.2-4">
          <li pn="section-4.2-4.1">
            <t indent="0" pn="section-4.2-4.1.1">Assuming ES3 is defined in PE1 and PE2, PE1 may be configured
            as (500, 0, Highest-Preference) and PE2 as (100, 0, Highest-Preference) for ES3.
           Both PEs will advertise the Ethernet
            Segment routes for ES3 with the indicated parameters in the DF
            Election Extended Community.</t>
          </li>
          <li pn="section-4.2-4.2">
            <t indent="0" pn="section-4.2-4.2.1">In addition, assuming there are VLAN-based service interfaces and that
            the PEs are attached to all Ethernet Tags in the range 1-4000,
            both PE1 and PE2 may be configured with (Ethernet
            Tag-range, Lowest-Preference), e.g., (2001-4000, Lowest-Preference).</t>
          </li>
          <li pn="section-4.2-4.3">
            <t indent="0" pn="section-4.2-4.3.1">This will result in PE1 being the Designated Forwarder for Ethernet
            Tags 1-2000 (since they use the default Highest-Preference
            Algorithm) and PE2 being the Designated Forwarder for Ethernet Tags
            2001-4000, due to the local policy overriding the
            Highest-Preference Algorithm.</t>
          </li>
        </ul>
        <t indent="0" pn="section-4.2-5">While the above logic provides a perfect load-balancing
        distribution of Ethernet Tags per Designated Forwarder when there are
        only two PEs, for Ethernet Segments attached to three or more PEs,
        there would be only two Designated Forwarder PEs for all the Ethernet
        Tags. Any other logic that provides a fair distribution of the
        Designated Forwarder function among the three or more PEs is valid, as
        long as that logic is consistent in all the PEs in the Ethernet
        Segment. It is important to note that, when a local policy overrides
        the Highest-Preference or Lowest-Preference signaled by all the PEs in
        the Ethernet Segment, this local policy <bcp14>MUST</bcp14> be consistent in all the
        PEs of the Ethernet Segment. If the local policy is inconsistent for a
        given Ethernet Tag in the Ethernet Segment, packet drops or packet
        duplication may occur on that Ethernet Tag. For all these reasons, the
        use of virtual Ethernet Segments is <bcp14>RECOMMENDED</bcp14> for cases where more
        than two PEs per Ethernet Segment exist and a good load-balancing
        distribution per Ethernet Tag of the Designated Forwarder function is
        desired. </t>
      </section>
      <section anchor="sect-4.3" numbered="true" toc="include" removeInRFC="false" pn="section-4.3">
        <name slugifiedName="name-the-non-revertive-capabilit">The Non-Revertive Capability</name>
        <t indent="0" pn="section-4.3-1">As discussed in <xref target="DP-capability" format="none" sectionFormat="of" derivedContent="">item d</xref> of <xref target="sect-1.2" format="default" sectionFormat="of" derivedContent="Section 1.2"/>, a capability to NOT
        preempt the existing Designated Forwarder (for all the Ethernet Tags
        in the Ethernet Segment) is required and therefore added to the
        DF Election Extended Community. This option allows a
        non-revertive behavior in the DF election.</t>
        <t indent="0" pn="section-4.3-2">Note that when a given PE in an Ethernet Segment is taken down for
        maintenance operations, before bringing it back, the Preference may be
        changed in order to provide a non-revertive behavior. The "Don't Preempt" Capability and
        the mechanism explained in this section will be used for those cases
        when a former Designated Forwarder comes back up without any
        controlled maintenance operation, and the non-revertive option is
        desired in order to avoid service impact.</t>
        <t indent="0" pn="section-4.3-3">In <xref target="es-and-deterministic-df-election" format="default" sectionFormat="of" derivedContent="Figure 3"/>, we assume
        that based on the Highest-Preference Algorithm, PE3 is the Designated
        Forwarder for ESI2.</t>
        <t indent="0" pn="section-4.3-4">If PE3 has a link, EVC, or node failure, PE2 would take over as the
        Designated Forwarder. If/when PE3 comes back up again, PE3 will take
        over, causing some unnecessary packet loss in the Ethernet
        Segment.</t>
        <t indent="0" pn="section-4.3-5">The following procedure avoids preemption upon failure recovery
        (see <xref target="es-and-deterministic-df-election" format="default" sectionFormat="of" derivedContent="Figure 3"/>).
        The procedure supports a non-revertive mode that can be used along
        with: </t>
        <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.3-6">
          <li pn="section-4.3-6.1">
            <t indent="0" pn="section-4.3-6.1.1">Highest-Preference Algorithm</t>
          </li>
          <li pn="section-4.3-6.2">
            <t indent="0" pn="section-4.3-6.2.1">Lowest-Preference Algorithm</t>
          </li>
          <li pn="section-4.3-6.3">
            <t indent="0" pn="section-4.3-6.3.1">Highest-Preference or Lowest-Preference Algorithm, where a
            local policy overrides the Highest-/Lowest-Preference tiebreaker
            for a range of Ethernet Tags (<xref target="sect-4.2" format="default" sectionFormat="of" derivedContent="Section 4.2"/>)</t>
          </li>
        </ul>
        <t indent="0" pn="section-4.3-7">The procedure is described, assuming the Highest-Preference
        Algorithm in the Ethernet Segment, where local policy overrides the
        tiebreaker for a given Ethernet Tag. The other cases above are a
        subset of this one, and the differences are explained.</t>
        <ol spacing="normal" type="1" indent="adaptive" start="1" pn="section-4.3-8"><li pn="section-4.3-8.1" derivedCounter="1.">
            <t indent="0" pn="section-4.3-8.1.1">A "Don't Preempt" Capability is defined on a
            per-PE / per-Ethernet-Segment basis, as described in <xref target="sect-3" format="default" sectionFormat="of" derivedContent="Section 3"/>. If "Don't Preempt" is disabled (default
            behavior), the PE sets DP to zero and advertises it in an Ethernet
            Segment route. If "Don't Preempt" is enabled, the Ethernet Segment
            route from the PE indicates the desire of not being preempted by
            the other PEs in the Ethernet Segment. All the PEs in an Ethernet
            Segment should be consistent in their configuration of the "Don't Preempt"
            Capability; however, this document does not enforce the
            consistency across all the PEs. In case of inconsistency in the
            support of the "Don't Preempt" Capability in the PEs of the same Ethernet
            Segment, non-revertive behavior is not guaranteed. However, PEs
            supporting this capability still attempt this procedure.</t>
          </li>
          <li pn="section-4.3-8.2" derivedCounter="2.">
            <t indent="0" pn="section-4.3-8.2.1">Assuming we want to avoid 'preemption' in all the PEs in the
            Ethernet Segment, the three PEs are configured with the "Don't
            Preempt" Capability. In this example, we assume ESI2 is configured
            as 'DP=enabled' in the three PEs.</t>
          </li>
          <li pn="section-4.3-8.3" derivedCounter="3.">
            <t indent="0" pn="section-4.3-8.3.1">We also assume vES2 is attached to Ethernet Tag-1 and Ethernet
            Tag-2.
	    vES2 uses Highest-Preference as the DF algorithm, and a local
            policy is configured in the three PEs to use Lowest-Preference for
            Ethernet Tag-2. When vES2 is enabled in the three PEs, the PEs
            will exchange the Ethernet Segment routes and select PE3 as
            the Designated Forwarder for Ethernet Tag-1 (due to the
            Highest-Preference) and PE1 as the Designated Forwarder for Ethernet
            Tag-2 (due to the Lowest-Preference).</t>
          </li>
          <li pn="section-4.3-8.4" derivedCounter="4.">
            <t indent="0" pn="section-4.3-8.4.1">If PE3's vES2 goes down (due to an EVC failure (as detected by OAM protocols),
            a port failure, or a node failure), PE2 will become the Designated
            Forwarder for Ethernet Tag-1. No changes will occur for Ethernet
            Tag-2.</t>
          </li>
          <li pn="section-4.3-8.5" derivedCounter="5.">
            <t indent="0" pn="section-4.3-8.5.1">When PE3's vES2 comes back up, PE3 will start a boot-timer (if
            booting up) or hold-timer (if the port or EVC recovers). That
            timer will allow some time for PE3 to receive the Ethernet Segment
            routes from PE1 and PE2. This timer is applied between the INIT
            and the DF_WAIT states in the DF election Finite
            State Machine described in <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>. PE3 will
            then:</t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.3-8.5.2">
              <li pn="section-4.3-8.5.2.1">
                <t indent="0" pn="section-4.3-8.5.2.1.1">Select a "reference-PE" among the Ethernet Segment routes
                in the virtual Ethernet Segment. If the Ethernet Segment uses
                the Highest-Preference Algorithm, select a "Highest-PE". If it
                uses the Lowest-Preference Algorithm, select a "Lowest-PE". If
                a local policy is in use, to override the
                Highest-/Lowest-Preference for a range of Ethernet Tags (as
                discussed in <xref target="sect-4.2" format="default" sectionFormat="of" derivedContent="Section 4.2"/>), it is necessary to
                select both a Highest-PE and a Lowest-PE. They are selected as
                follows: </t>
                <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.3-8.5.2.1.2">
                  <li pn="section-4.3-8.5.2.1.2.1">
                    <t indent="0" pn="section-4.3-8.5.2.1.2.1.1">The Highest-PE is the PE with higher Preference, using
                    the "Don't Preempt" Capability first (with DP=1 being better) and, after that,
                    the lower PE-IP address as tiebreakers. </t>
                  </li>
                  <li pn="section-4.3-8.5.2.1.2.2">
                    <t indent="0" pn="section-4.3-8.5.2.1.2.2.1">The Lowest-PE is the PE with lower Preference, using
                    the "Don't Preempt" Capability first (with DP=1 being better) and, after that,
                    the lower PE-IP address as tiebreakers. </t>
                  </li>
                  <li pn="section-4.3-8.5.2.1.2.3">
                    <t indent="0" pn="section-4.3-8.5.2.1.2.3.1">In our example, the Highest-Preference Algorithm is
                    used, with a local policy to override it to use
                    Lowest-Preference for a range of Ethernet Tags. Therefore,
                    PE3 selects a Highest-PE and a Lowest-PE. PE3 will select
                    PE2 as the Highest-PE over PE1, because when comparing
                    (Pref, DP, PE-IP), (200, 1, PE2-IP) wins over (100, 1, PE1-IP).
                    PE3 will select PE1 as the Lowest-PE over PE2, because
                    (100, 1, PE1-IP) wins over (200, 1, PE2-IP). Note that if
                    there were only one remote PE in the Ethernet Segment,
                    the Lowest and Highest PE would be the same PE.</t>
                  </li>
                </ul>
              </li>
              <li pn="section-4.3-8.5.2.2">
                <t indent="0" pn="section-4.3-8.5.2.2.1">Check its own administrative Pref and compare it with the
                one of the Highest-PE and Lowest-PE that have the "Don't Preempt"
                Capability set in their Ethernet Segment routes. Depending on
                this comparison, PE3 sends the Ethernet Segment route with a
                (Pref, DP) that may be different from its administrative
                (Pref, DP):</t>
                <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.3-8.5.2.2.2">
                  <li pn="section-4.3-8.5.2.2.2.1">
                    <t indent="0" pn="section-4.3-8.5.2.2.2.1.1">If PE3's Pref value is higher than or equal to the
                    Highest-PE's, PE3 will send the Ethernet Segment route
                    with an 'in-use' operational Pref equal to the
                    Highest-PE's and DP=0.</t>
                  </li>
                  <li pn="section-4.3-8.5.2.2.2.2">
                    <t indent="0" pn="section-4.3-8.5.2.2.2.2.1">If PE3's Pref value is lower than or equal to the
                    Lowest-PE's, PE3 will send the Ethernet Segment route with
                    an 'in-use' operational Preference equal to the
                    Lowest-PE's and DP=0.</t>
                  </li>
                  <li pn="section-4.3-8.5.2.2.2.3">
                    <t indent="0" pn="section-4.3-8.5.2.2.2.3.1">If PE3's Pref value is not higher than or equal to the
                    Highest-PE's and is not lower than or equal to the
                    Lowest-PE's, PE3 will send the Ethernet Segment route with
                    its administrative (Pref, DP)=(300, 1).</t>
                  </li>
                  <li pn="section-4.3-8.5.2.2.2.4">
                    <t indent="0" pn="section-4.3-8.5.2.2.2.4.1">In this example, PE3's administrative Pref=300 is
                    higher than the Highest-PE with DP=1, that is, PE2
                    (Pref=200). Hence, PE3 will inherit PE2's preference and
                    send the Ethernet Segment route with an operational
                    'in-use' (Pref, DP)=(200, 0).</t>
                  </li>
                </ul>
              </li>
              <li pn="section-4.3-8.5.2.3">
                <t indent="0" pn="section-4.3-8.5.2.3.1">Send its "Don't Preempt" Capability set to
                zero, as long as the advertised Pref is the 'in-use'
                operational Pref (as opposed to the 'administrative'
                Pref).</t>
              </li>
              <li pn="section-4.3-8.5.2.4">
                <t indent="0" pn="section-4.3-8.5.2.4.1">Not trigger any Designated Forwarder changes for Ethernet Tag-1. This Ethernet Segment route update sent by PE3, with
                (200, 0, PE3-IP), will not cause any Designated Forwarder
                switchover for any Ethernet Tag. This is because the
                 "Don't Preempt" Capability will be used as a tiebreaker in the DF election. That is, if a PE has two candidate PEs
                with the same Pref, it will pick the one with DP=1. There are
                no Designated Forwarder changes for Ethernet Tag-2 either.</t>
              </li>
            </ul>
          </li>
          <li pn="section-4.3-8.6" derivedCounter="6.">
            <t indent="0" pn="section-4.3-8.6.1">For any subsequent received update/withdraw in the Ethernet
            Segment, the PEs will go through the process described in (5) to
            select the Highest-PEs and Lowest-PEs, now considering themselves as
            candidates. For instance, if PE2 fails upon receiving PE2's
            Ethernet Segment route withdrawal, PE3 and PE1 will go through the
            selection of the new Highest-PEs and Lowest-PEs (considering their own
            active Ethernet Segment route), and then they will run the
            DF election.</t>
            <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-4.3-8.6.2">
              <li pn="section-4.3-8.6.2.1">
                <t indent="0" pn="section-4.3-8.6.2.1.1">If a PE selects itself as the new Highest-PE or Lowest-PE and it
                was not before, the PE will then compare its operational
                'in-use' Pref with its administrative Pref. If different, the
                PE will send an Ethernet Segment route update with its
                administrative Pref and DP values. In the example, PE3 will be
                the new Highest-PE; therefore, it will send an Ethernet Segment
                route update with (Pref, DP)=(300, 1).</t>
              </li>
              <li pn="section-4.3-8.6.2.2">
                <t indent="0" pn="section-4.3-8.6.2.2.1">After running the DF election, PE3 will
                become the new Designated Forwarder for Ethernet Tag-1. No
                changes will occur for Ethernet Tag-2.</t>
              </li>
            </ul>
          </li>
        </ol>
        <t indent="0" pn="section-4.3-9">Note that, irrespective of the "Don't Preempt" Capability, when a PE or Ethernet
        Segment comes back and the PE advertises a DF
        election algorithm different from the one configured in the rest of
        the PEs in the Ethernet Segment, all the PEs in the Ethernet Segment
        <bcp14>MUST</bcp14> fall back to the default DF algorithm <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/>.</t>
        <t indent="0" pn="section-4.3-10">This document does not modify the use of the P and B bits in the
        Ethernet A-D per EVI routes <xref target="RFC8214" format="default" sectionFormat="of" derivedContent="RFC8214"/> advertised by the
        PEs in the Ethernet Segment after running the DF
        election, irrespective of the revertive or non-revertive behavior in
        the PE.</t>
      </section>
    </section>
    <section anchor="sect-5" numbered="true" toc="include" removeInRFC="false" pn="section-5">
      <name slugifiedName="name-security-considerations">Security Considerations</name>
      <t indent="0" pn="section-5-1">This document describes a DF election algorithm
      that provides absolute control (by configuration) over what PE is the
      Designated Forwarder for a given Ethernet Tag. While this control is
      desired in many situations, a malicious user that gets access to the
      configuration of a PE in the Ethernet Segment may change the behavior of
      the network. In other DF algorithms such as HRW, the DF election is more automated and cannot be determined by
      configuration.
      If the DF algorithm is Highest-Preference or Lowest-Preference, an attacker may change the configuration of the preference
      value on a PE and Ethernet Segment to impact the traffic going through
      that PE and Ethernet Segment.</t>
      <t indent="0" pn="section-5-2">The non-revertive capability described in this document may be seen
      as a security improvement over the regular EVPN revertive DF election: an intentional link (or node) "flapping" on a PE
      will only cause service disruption once, when the PE goes to
      Non-Designated Forwarder state. However, an attacker who gets access to
      the configuration of a PE in the Ethernet Segment will be able to
      disable the non-revertive behavior, by advertising a conflicting DF
      election algorithm and thereby forcing fallback to the default DF
      algorithm. </t>
      <t indent="0" pn="section-5-3">The document also describes how a local policy can override the
      Highest-Preference or Lowest-Preference Algorithms for a range of
      Ethernet Tags in the Ethernet Segment. If the local policy is not
      consistent across all PEs in the Ethernet Segment and there is an
      Ethernet Tag that ends up with an inconsistent use of Highest-Preference
      or Lowest-Preference in different PEs, packet drop or packet duplication
      may occur for that Ethernet Tag.</t>
      <t indent="0" pn="section-5-4">Finally, the two DF election algorithms specified
      in this document (Highest-Preference and Lowest-Preference) do not
      change the way the PEs share their Ethernet Segment information,
      compared to the algorithms in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> and <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>. Therefore, the security considerations in <xref target="RFC7432" format="default" sectionFormat="of" derivedContent="RFC7432"/> and <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/> apply to this document
      as well.</t>
    </section>
    <section anchor="sect-6" numbered="true" toc="include" removeInRFC="false" pn="section-6">
      <name slugifiedName="name-iana-considerations">IANA Considerations</name>
      <t indent="0" pn="section-6-1">Per this document, IANA has:</t>
      <ul spacing="normal" bare="false" empty="false" indent="3" pn="section-6-2">
        <li pn="section-6-2.1">
          <t indent="0" pn="section-6-2.1.1">Allocated two new values in the "DF Alg" registry created
          by <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/>, as follows:</t>
          <table align="left" pn="table-1">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Alg</th>
                <th align="left" colspan="1" rowspan="1">Name</th>
                <th align="left" colspan="1" rowspan="1">Reference</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">2</td>
                <td align="left" colspan="1" rowspan="1">Highest-Preference Algorithm</td>
                <td align="left" colspan="1" rowspan="1">RFC 9785</td>
              </tr>
              <tr>
                <td align="left" colspan="1" rowspan="1">3</td>
                <td align="left" colspan="1" rowspan="1">Lowest-Preference Algorithm</td>
                <td align="left" colspan="1" rowspan="1">RFC 9785</td>
              </tr>
            </tbody>
          </table>
        </li>
        <li pn="section-6-2.2">
          <t indent="0" pn="section-6-2.2.1">Allocated a new value in the "DF Election Capabilities"
          registry created by <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/> for the 2-octet Bitmap
          field in the DF Election Extended Community (under the "Border 
          Gateway Protocol (BGP) Extended Communities" registry group), as follows:</t>
          <table align="left" pn="table-2">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Bit</th>
                <th align="left" colspan="1" rowspan="1">Name</th>
                <th align="left" colspan="1" rowspan="1">Reference</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0</td>
                <td align="left" colspan="1" rowspan="1">D (Don't Preempt) Capability</td>
                <td align="left" colspan="1" rowspan="1">RFC 9785</td>
              </tr>
            </tbody>
          </table>
        </li>
        <li pn="section-6-2.3">
          <t indent="0" pn="section-6-2.3.1">Listed this document as an additional reference for the DF Election Extended Community field in the "EVPN Extended Community Sub-Types" registry, as follows:</t>
          <table align="left" pn="table-3">
            <thead>
              <tr>
                <th align="left" colspan="1" rowspan="1">Sub-Type Value</th>
                <th align="left" colspan="1" rowspan="1">Name</th>
                <th align="left" colspan="1" rowspan="1">Reference</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="left" colspan="1" rowspan="1">0x06</td>
                <td align="left" colspan="1" rowspan="1">DF Election Extended Community</td>
                <td align="left" colspan="1" rowspan="1">
                  <xref target="RFC8584" format="default" sectionFormat="of" derivedContent="RFC8584"/> and RFC 9785</td>
              </tr>
            </tbody>
          </table>
        </li>
      </ul>
    </section>
  </middle>
  <back>
    <references pn="section-7">
      <name slugifiedName="name-references">References</name>
      <references pn="section-7.1">
        <name slugifiedName="name-normative-references">Normative References</name>
        <reference anchor="RFC2119" target="https://www.rfc-editor.org/info/rfc2119" quoteTitle="true" derivedAnchor="RFC2119">
          <front>
            <title>Key words for use in RFCs to Indicate Requirement Levels</title>
            <author fullname="S. Bradner" initials="S." surname="Bradner"/>
            <date month="March" year="1997"/>
            <abstract>
              <t indent="0">In many standards track documents several words are used to signify the requirements in the specification. These words are often capitalized. This document defines these words as they should be interpreted in IETF documents. This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="2119"/>
          <seriesInfo name="DOI" value="10.17487/RFC2119"/>
        </reference>
        <reference anchor="RFC7432" target="https://www.rfc-editor.org/info/rfc7432" quoteTitle="true" derivedAnchor="RFC7432">
          <front>
            <title>BGP MPLS-Based Ethernet VPN</title>
            <author fullname="A. Sajassi" initials="A." role="editor" surname="Sajassi"/>
            <author fullname="R. Aggarwal" initials="R." surname="Aggarwal"/>
            <author fullname="N. Bitar" initials="N." surname="Bitar"/>
            <author fullname="A. Isaac" initials="A." surname="Isaac"/>
            <author fullname="J. Uttaro" initials="J." surname="Uttaro"/>
            <author fullname="J. Drake" initials="J." surname="Drake"/>
            <author fullname="W. Henderickx" initials="W." surname="Henderickx"/>
            <date month="February" year="2015"/>
            <abstract>
              <t indent="0">This document describes procedures for BGP MPLS-based Ethernet VPNs (EVPN). The procedures described here meet the requirements specified in RFC 7209 -- "Requirements for Ethernet VPN (EVPN)".</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7432"/>
          <seriesInfo name="DOI" value="10.17487/RFC7432"/>
        </reference>
        <reference anchor="RFC8174" target="https://www.rfc-editor.org/info/rfc8174" quoteTitle="true" derivedAnchor="RFC8174">
          <front>
            <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
            <author fullname="B. Leiba" initials="B." surname="Leiba"/>
            <date month="May" year="2017"/>
            <abstract>
              <t indent="0">RFC 2119 specifies common key words that may be used in protocol specifications. This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the defined special meanings.</t>
            </abstract>
          </front>
          <seriesInfo name="BCP" value="14"/>
          <seriesInfo name="RFC" value="8174"/>
          <seriesInfo name="DOI" value="10.17487/RFC8174"/>
        </reference>
        <reference anchor="RFC8584" target="https://www.rfc-editor.org/info/rfc8584" quoteTitle="true" derivedAnchor="RFC8584">
          <front>
            <title>Framework for Ethernet VPN Designated Forwarder Election Extensibility</title>
            <author fullname="J. Rabadan" initials="J." role="editor" surname="Rabadan"/>
            <author fullname="S. Mohanty" initials="S." role="editor" surname="Mohanty"/>
            <author fullname="A. Sajassi" initials="A." surname="Sajassi"/>
            <author fullname="J. Drake" initials="J." surname="Drake"/>
            <author fullname="K. Nagaraj" initials="K." surname="Nagaraj"/>
            <author fullname="S. Sathappan" initials="S." surname="Sathappan"/>
            <date month="April" year="2019"/>
            <abstract>
              <t indent="0">An alternative to the default Designated Forwarder (DF) selection algorithm in Ethernet VPNs (EVPNs) is defined. The DF is the Provider Edge (PE) router responsible for sending Broadcast, Unknown Unicast, and Multicast (BUM) traffic to a multihomed Customer Edge (CE) device on a given VLAN on a particular Ethernet Segment (ES). In addition, the ability to influence the DF election result for a VLAN based on the state of the associated Attachment Circuit (AC) is specified. This document clarifies the DF election Finite State Machine in EVPN services. Therefore, it updates the EVPN specification (RFC 7432).</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8584"/>
          <seriesInfo name="DOI" value="10.17487/RFC8584"/>
        </reference>
        <reference anchor="RFC9784" target="https://www.rfc-editor.org/info/rfc9784" quoteTitle="true" derivedAnchor="RFC9784">
          <front>
            <title>Virtual Ethernet Segments for EVPN and Provider Backbone Bridge EVPN</title>
            <author initials="A." surname="Sajassi" fullname="Ali Sajassi">
              <organization showOnFrontPage="true">Cisco Systems</organization>
            </author>
            <author initials="P." surname="Brissette" fullname="Patrice Brissette">
              <organization showOnFrontPage="true">Cisco Systems</organization>
            </author>
            <author initials="R." surname="Schell" fullname="Rick Schell">
              <organization showOnFrontPage="true">Verizon</organization>
            </author>
            <author initials="J." surname="Drake" fullname="John Drake">
              <organization showOnFrontPage="true">Juniper</organization>
            </author>
            <author initials="J." surname="Rabadan" fullname="Jorge Rabadan">
              <organization showOnFrontPage="true">Nokia</organization>
            </author>
            <date month="June" year="2025"/>
          </front>
          <seriesInfo name="RFC" value="9784"/>
          <seriesInfo name="DOI" value="10.17487/9784"/>
        </reference>
      </references>
      <references pn="section-7.2">
        <name slugifiedName="name-informative-references">Informative References</name>
        <reference anchor="RFC7623" target="https://www.rfc-editor.org/info/rfc7623" quoteTitle="true" derivedAnchor="RFC7623">
          <front>
            <title>Provider Backbone Bridging Combined with Ethernet VPN (PBB-EVPN)</title>
            <author fullname="A. Sajassi" initials="A." role="editor" surname="Sajassi"/>
            <author fullname="S. Salam" initials="S." surname="Salam"/>
            <author fullname="N. Bitar" initials="N." surname="Bitar"/>
            <author fullname="A. Isaac" initials="A." surname="Isaac"/>
            <author fullname="W. Henderickx" initials="W." surname="Henderickx"/>
            <date month="September" year="2015"/>
            <abstract>
              <t indent="0">This document discusses how Ethernet Provider Backbone Bridging (PBB) can be combined with Ethernet VPN (EVPN) in order to reduce the number of BGP MAC Advertisement routes by aggregating Customer/Client MAC (C-MAC) addresses via Provider Backbone MAC (B-MAC) address, provide client MAC address mobility using C-MAC aggregation, confine the scope of C-MAC learning to only active flows, offer per-site policies, and avoid C-MAC address flushing on topology changes. The combined solution is referred to as PBB-EVPN.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="7623"/>
          <seriesInfo name="DOI" value="10.17487/RFC7623"/>
        </reference>
        <reference anchor="RFC8214" target="https://www.rfc-editor.org/info/rfc8214" quoteTitle="true" derivedAnchor="RFC8214">
          <front>
            <title>Virtual Private Wire Service Support in Ethernet VPN</title>
            <author fullname="S. Boutros" initials="S." surname="Boutros"/>
            <author fullname="A. Sajassi" initials="A." surname="Sajassi"/>
            <author fullname="S. Salam" initials="S." surname="Salam"/>
            <author fullname="J. Drake" initials="J." surname="Drake"/>
            <author fullname="J. Rabadan" initials="J." surname="Rabadan"/>
            <date month="August" year="2017"/>
            <abstract>
              <t indent="0">This document describes how Ethernet VPN (EVPN) can be used to support the Virtual Private Wire Service (VPWS) in MPLS/IP networks. EVPN accomplishes the following for VPWS: provides Single-Active as well as All-Active multihoming with flow-based load-balancing, eliminates the need for Pseudowire (PW) signaling, and provides fast protection convergence upon node or link failure.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8214"/>
          <seriesInfo name="DOI" value="10.17487/RFC8214"/>
        </reference>
        <reference anchor="RFC8365" target="https://www.rfc-editor.org/info/rfc8365" quoteTitle="true" derivedAnchor="RFC8365">
          <front>
            <title>A Network Virtualization Overlay Solution Using Ethernet VPN (EVPN)</title>
            <author fullname="A. Sajassi" initials="A." role="editor" surname="Sajassi"/>
            <author fullname="J. Drake" initials="J." role="editor" surname="Drake"/>
            <author fullname="N. Bitar" initials="N." surname="Bitar"/>
            <author fullname="R. Shekhar" initials="R." surname="Shekhar"/>
            <author fullname="J. Uttaro" initials="J." surname="Uttaro"/>
            <author fullname="W. Henderickx" initials="W." surname="Henderickx"/>
            <date month="March" year="2018"/>
            <abstract>
              <t indent="0">This document specifies how Ethernet VPN (EVPN) can be used as a Network Virtualization Overlay (NVO) solution and explores the various tunnel encapsulation options over IP and their impact on the EVPN control plane and procedures. In particular, the following encapsulation options are analyzed: Virtual Extensible LAN (VXLAN), Network Virtualization using Generic Routing Encapsulation (NVGRE), and MPLS over GRE. This specification is also applicable to Generic Network Virtualization Encapsulation (GENEVE); however, some incremental work is required, which will be covered in a separate document. This document also specifies new multihoming procedures for split-horizon filtering and mass withdrawal. It also specifies EVPN route constructions for VXLAN/NVGRE encapsulations and Autonomous System Border Router (ASBR) procedures for multihoming of Network Virtualization Edge (NVE) devices.</t>
            </abstract>
          </front>
          <seriesInfo name="RFC" value="8365"/>
          <seriesInfo name="DOI" value="10.17487/RFC8365"/>
        </reference>
      </references>
    </references>
    <section anchor="sect-7" numbered="false" toc="include" removeInRFC="false" pn="section-appendix.a">
      <name slugifiedName="name-acknowledgements">Acknowledgements</name>
      <t indent="0" pn="section-appendix.a-1">The authors would like to thank <contact fullname="Kishore       Tiruveedhula"/> and <contact fullname="Sasha Vainshtein"/> for their
      reviews and comments. Also, thank you to <contact fullname="Luc André       Burdet"/> and <contact fullname="Stephane Litkowski"/> for their
      thorough reviews and suggestions for a new
      Lowest-Preference Algorithm.</t>
    </section>
    <section anchor="sect-8" numbered="false" toc="include" removeInRFC="false" pn="section-appendix.b">
      <name slugifiedName="name-contributors">Contributors</name>
      <t indent="0" pn="section-appendix.b-1">In addition to the authors listed, the following individuals also
      contributed to this document:</t>
      <contact fullname="Tony Przygienda">
        <organization showOnFrontPage="true">Juniper</organization>
      </contact>
      <contact fullname="Satya Mohanty">
        <organization showOnFrontPage="true">Cisco</organization>
      </contact>
      <contact fullname="Kiran Nagaraj">
        <organization showOnFrontPage="true">Nokia</organization>
      </contact>
      <contact fullname="Vinod Prabhu">
        <organization showOnFrontPage="true">Nokia</organization>
      </contact>
      <contact fullname="Selvakumar Sivaraj">
        <organization showOnFrontPage="true">Juniper</organization>
      </contact>
      <contact fullname="Sami Boutros">
        <organization showOnFrontPage="true">VMWare</organization>
      </contact>
    </section>
    <section anchor="authors-addresses" numbered="false" removeInRFC="false" toc="include" pn="section-appendix.c">
      <name slugifiedName="name-authors-addresses">Authors' Addresses</name>
      <author fullname="Jorge Rabadan" initials="J." role="editor" surname="Rabadan">
        <organization showOnFrontPage="true">Nokia</organization>
        <address>
          <postal>
            <street>520 Almanor Avenue</street>
            <city>Sunnyvale</city>
            <region>CA</region>
            <code>94085</code>
            <country>United States of America</country>
          </postal>
          <email>jorge.rabadan@nokia.com</email>
        </address>
      </author>
      <author fullname="Senthil Sathappan" initials="S." surname="Sathappan">
        <organization showOnFrontPage="true">Nokia</organization>
        <address>
          <email>senthil.sathappan@nokia.com</email>
        </address>
      </author>
      <author fullname="Wen Lin" initials="W." surname="Lin">
        <organization showOnFrontPage="true">Juniper Networks</organization>
        <address>
          <email>wlin@juniper.net</email>
        </address>
      </author>
      <author fullname="John Drake" initials="J." surname="Drake">
        <organization showOnFrontPage="true">Independent</organization>
        <address>
          <email>je_drake@yahoo.com</email>
        </address>
      </author>
      <author fullname="Ali Sajassi" initials="A." surname="Sajassi">
        <organization showOnFrontPage="true">Cisco Systems</organization>
        <address>
          <email>sajassi@cisco.com</email>
        </address>
      </author>
    </section>
  </back>
</rfc>
